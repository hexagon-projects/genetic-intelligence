import{_ as S,g as I,e as i,H as B,i as P,c,a as o,k as x,v as w,D as m,E as b,j as y,S as p,q as E,o as f,t as C,x as R}from"./index-BLbGlZhr.js";import{p as u}from"./purify.es-DX2bXU93.js";const _=r=>(C("data-v-cb847cf0"),r=r(),R(),r),F={id:"img-login",class:"w-full flex flex-row items-center justify-center min-h-screen px-4"},q={class:"flex justify-center pt-22"},j={class:"w-[640px] bg-white mx-4 lg:mx-auto px-10 py-4 drop-shadow-2xl rounded-lg"},z={class:"flex flex-col justify-center items-center mb-6"},A=_(()=>o("h2",{class:"text-black text-lg lg:text-2xl font-myFont font-bold mb-2 mt-5"},"Reset Password",-1)),V=_(()=>o("a",{class:"font-myFont text-gray-500 text-xs lg:text-sm mb-4"}," Silahkan sesuaikan password anda sekarang. ",-1)),D={class:"mt-4 w-full lg:w-1/2 mb-4"},T={key:0,class:"mb-2 mt-1 font-myFont text-red-500 text-xs italic"},M={key:1,class:"mt-1 font-myFont text-red-500 text-xs italic"},N=["disabled"],U={__name:"reset",setup(r){const n=I(),v=i(n.currentRoute.value.query.code);B(()=>{(v.value==""||!localStorage.getItem("resetEmailReq"))&&n.push("/login")});const a=i(""),t=i(""),e=i(null),g=()=>{t.value!==a.value||a.value!==t.value?e.value="Password tidak sesuai":a.value.length<8||t.value.length<8?e.value="Password harus berisi 8 karakter":e.value=null},h=P(()=>!a.value||!t.value||a.value.trim()==""||t.value.trim()==""||e.value!==null),k=async()=>{if(a.value.trim()==""||t.value.trim()==""||u.sanitize(a.value)==""||u.sanitize(t.value)==""||a.value.length<8||t.value.length<8)p.fire({icon:"error",title:"Error",text:"Tidak ada data yang bisa dikirim.",showConfirmButton:!1,timer:2300});else try{const d={code:u.sanitize(n.currentRoute.value.query.code),email:localStorage.getItem("resetEmailReq"),password:u.sanitize(t.value)},s=await E("post","v2/reset-password",JSON.stringify(d),null);v.value="",p.fire({icon:"success",title:"Berhasil",text:"Password anda berhasil diubah.",confirmButtonColor:"#0b40f4",confirmButtonText:"Login"}).then(l=>{l.isConfirmed&&(localStorage.removeItem("resetEmailReq"),localStorage.getItem("refreshActionPage")&&localStorage.removeItem("refreshActionPage"),localStorage.getItem("refreshActionEmail")&&localStorage.removeItem("refreshActionEmail"),n.push("/login"))})}catch{p.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat merubah password.",showConfirmButton:!1,timer:2300})}};return(d,s)=>(f(),c("div",F,[o("div",q,[o("div",j,[o("div",z,[A,V,o("div",D,[x(o("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a.value=l),onInput:g,type:"password",name:"password1",class:m(["placeholder:text-base font-myFont rounded-md border w-full py-2 px-3",{"border-danger outline-none":e.value!==null,"border-gray-300 mb-2":e.value==null}]),placeholder:"Masukan Password Baru",autocomplete:"off"},null,34),[[w,a.value]]),e.value!==null?(f(),c("p",T,b(e.value)+".",1)):y("",!0),x(o("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.value=l),onInput:g,type:"password",name:"password2",class:m(["placeholder:text-base font-myFont rounded-md border w-full py-2 px-3",{"border-danger outline-none":e.value!==null,"border-gray-300":e.value==null}]),placeholder:"Konfirmasi Password Baru",autocomplete:"off"},null,34),[[w,t.value]]),e.value!==null?(f(),c("p",M,b(e.value)+".",1)):y("",!0)]),o("button",{disabled:h.value,onClick:k,class:m([{"bg-gray-600 opacity-80 cursor-not-allowed":h.value},"w-full lg:w-1/2 mb-4 font-myFont bg-biru text-white py-2 px-4 rounded-lg hover:opacity-75 hover:shadow-lg"])}," Submit ",10,N)])])])]))}},K=S(U,[["__scopeId","data-v-cb847cf0"]]);export{K as default};
