import{u as S,g as j,e as r,h as N,o as y,c as b,a as e,b as F,n as B,E as T,_ as z,f as D,q as w,S as P,r as I,J as A,j as C,k as m,v as c,F as E,L as G,s as R}from"./index-BLbGlZhr.js";import{G as V}from"./PhWarning.vue-CIgJYYSI.js";import{p as H}from"./purify.es-DX2bXU93.js";const L={class:"fixed z-[999] inset-0 bg-gray-900 bg-opacity-60 overflow-y-auto h-full w-full px-4 modal"},O={class:"hidden lg:block relative w-3/4 top-10 mx-auto shadow-xl rounded-md bg-white"},Q={class:"w-full my-4 p-4 flex flex-col"},W={class:"my-4 mx-auto bg-red-500 px-6 py-6 rounded-full"},X={class:"text-center"},Y=e("h3",{class:"uppercase md:text-2xl text-base text-gray-900 font-semibold text-center"},"Perhatian",-1),Z={class:"text-gray-600 my-2"},$={class:"block lg:hidden relative w-full top-10 mx-auto shadow-xl rounded-md bg-white"},ee={class:"w-full p-4 flex flex-col"},te={class:"my-4 mx-auto bg-red-500 px-6 py-6 rounded-full"},ae={class:"text-center"},oe=e("h3",{class:"uppercase text-lg text-gray-900 font-semibold text-center"},"Perhatian",-1),se={class:"text-gray-600 my-2 text-sm"},ne={__name:"modalInfo",emits:["understand"],setup(_,{emit:s}){const i=S(),t=j(),n=r(i.params.tipePembayaran=="test-iq"?"IQ":i.params.tipePembayaran=="test-gim"?"Genetic Intelligence Mapping":i.params.tipePembayaran=="starter-pack"?"Starter Pack":i.params.tipePembayaran=="test-rmib"?"RMIB":i.params.tipePembayaran=="test-iaa"?"Kecanduan Gadget":"Assessment"),o=s,u=()=>{o("understand")},d=()=>{t.push("/")};return N(()=>{}),(a,p)=>(y(),b("div",L,[e("div",O,[e("div",Q,[e("a",W,[F(B(V),{size:"38",fill:"white"})]),e("div",X,[Y,e("p",Z," Untuk melakukan Test "+T(n.value)+", Harap melakukan pembayaran terlebih dahulu. ",1),e("div",{class:"gap-2 flex justify-center items-center pb-4 pt-6 text-center"},[e("button",{onClick:d,class:"rounded-lg font-myFont px-12 bg-gray-300 hover:bg-opacity-75 hover:shadow-lg text-black font-medium py-3"}," Kembali "),e("button",{onClick:u,class:"rounded-lg font-myFont px-12 bg-biru hover:bg-opacity-75 hover:shadow-lg text-white font-medium py-3"}," Mengerti ")])])])]),e("div",$,[e("div",ee,[e("a",te,[F(B(V),{size:"38",fill:"white"})]),e("div",ae,[oe,e("p",se," Untuk melakukan Test "+T(n.value)+", Harap melakukan pembayaran terlebih dahulu. ",1),e("div",{class:"w-3/4 mx-auto flex flex-col gap-2 pb-4 pt-6 text-center"},[e("button",{onClick:u,class:"rounded-lg font-myFont px-4 bg-biru hover:bg-opacity-75 hover:shadow-lg text-sm text-white font-medium py-2"}," Mengerti "),e("button",{onClick:d,class:"rounded-lg font-myFont px-4 bg-gray-300 hover:bg-opacity-75 hover:shadow-lg text-sm text-black font-medium py-2"}," Kembali ke Beranda ")])])])])]))}},le={name:"HalamanPembayaran",components:{modalInfo:ne},setup(){const _=r(!0),s=D(),i=S(),t=j(),n=r(!1),o=r(""),u=r(""),d=r(""),a=r(""),p=r(""),k=r("");console.log(p);const U=r([]),q=async()=>{if(!p.value)try{const l=o.value=="test-iq"?"test/payment?type=iq":o.value=="test-gim"?"test/payment?type=gim":o.value=="starter-pack"?"test/payment?type=starter-pack":o.value=="test-iaa"?"test/payment?type=iaa":o.value=="test-tik"?"test/payment?type=tik":o.value=="test-rmib"?"test/payment?type=rmib":"test/payment?type=assessment",x=await w("get",l,null,null);p.value=x.data.price}catch{P.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data harga pembayaran.",showConfirmButton:!1,timer:2500})}},J=(l,x,M)=>{d.value=x,a.value=l,k.value=M,q()},K=async()=>{const l=R.get("token"),x={voucher_code:H.sanitize(u.value),customer_id:JSON.parse(localStorage.getItem("userData")).id,payment_method_code:a.value,fee:k.value},M=o.value=="test-iq"?"v2/payment/test/iq":o.value=="test-gim"?"v2/payment/test/gim":o.value=="starter-pack"?"v2/payment/test/starter-pack":o.value=="test-iaa"?"v2/payment/test/iaa":o.value=="test-tik"?"v2/payment/test/tik":o.value=="test-rmib"?"v2/payment/test/rmib":"v2/payment/test/assessment";try{n.value=!0;const h=await w("post",M,JSON.stringify(x),l);if(h.data.data&&h.data.data.paymentUrl){const f=h.data.data.paymentUrl;let g="",v="";localStorage.setItem("merchantId",JSON.stringify(h.data.payment_data.merchant_order_id)),f.includes("ref=")?(g="https://sandbox.duitku.com/TopUp/v2/TopUpVAPage.aspx?ref=",v=f.split("ref=")[1]):f.includes("reference=")&&(g="https://sandbox.duitku.com/topup/v2/TopUpCreditCardPayment.aspx?reference=",v=f.split("reference=")[1]),window.location.href=g+v}else{const f=new FormData;f.append("refresh_user","true");const g=await w("post","login",f,l);s.commit("user",g.data.customer),localStorage.setItem("userData",JSON.stringify(g.data.customer)),P.fire({icon:"success",title:"Berhasil",text:"Selamat! Pembayaran Berhasil.",showConfirmButton:!0,confirmButtonColor:"#0b40f4",confirmButtonText:"Lanjutkan"}).then(v=>{v.isConfirmed&&t.push({name:o.value=="test-iq"?"user.views.iq":o.value=="test-gim"?"user.views.deteksi":o.value=="test-assessment"?"user.views.assesment":o.value=="test-rmib"?"user.views.rmib":o.value=="test-iaa"?"user.views.test_gadget":o.value=="test-tik"?"user.views.test_kebahagiaan":o.value=="test-gadget"?"user.views.test_gadget":"views.dashboard"})})}}catch(h){P.fire({icon:"error",title:"Error",text:h.response.data.error,showConfirmButton:!1,timer:2500})}finally{n.value=!1}};return N(async()=>{n.value=!n.value;try{const l=await w("get","payment/methods",null,null);U.value=l.data.paymentFee}catch{P.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data metode pembayaran.",showConfirmButton:!1,timer:2500})}o.value=i.params.tipePembayaran,n.value=!n.value}),{showModal:_,toggleModal:()=>{_.value=!_.value},loadingFetch:n,code_voucher:u,paymentType:d,paymentCode:a,totalFee:p,feePaymentMethod:k,paymentMethod:U,pilihPayment:J,submitPayment:K}}},re={class:"bg-gray-100 py-[6vh]"},ie={class:"flex flex-col items-center lg:flex-row justify-center mx-4 mb-4 pt-4 pb-10 gap-4"},de={class:"bg-white mx-4 w-full lg:w-9/12 lg:mx-auto px-10 py-4 shadow-sm rounded-lg"},me={class:"lg:hidden flex flex-col items-center gap-2"},ce={class:"w-full"},ue=e("label",{for:"code_voucher",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Kode Voucher:",-1),pe={class:"flex items-center gap-1"},fe=e("p",{class:"font-myFont text-neutral-500 text-xs"},"Jika punya, Gunakan kode voucher saat mendaftar untuk meraih keuntungan tambahan.",-1),ye=e("hr",{class:"my-4 lg:hidden"},null,-1),he={class:"lg:hidden flex flex-col justify-center items-center gap-2"},ge={class:"w-full"},be=e("label",{for:"metode_pembayaran",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Metode Pembayaran:",-1),_e={class:"w-full"},xe=e("label",{for:"total_fee",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Total Pembayaran:",-1),ve={class:"w-full mb-2"},ke=e("label",{for:"payment_code",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Biaya Admin:",-1),we=e("h1",{class:"hidden lg:block font-myFont text-dark text-lg mb-10"}," Lakukan pembayaran sekarang ",-1),Pe={class:"hidden lg:flex items-center gap-4"},Fe={class:"w-1/4 mb-4"},Me=e("label",{for:"code_voucher",class:"block text-sm font-myFont font-medium text-gray-600"},"Kode Voucher:",-1),Ce={class:"flex items-center mt-2 gap-1"},Ue=e("p",{class:"font-myFont text-neutral-500 text-sm"},"Jika punya, Gunakan kode voucher saat mendaftar untuk meraih keuntungan tambahan.",-1),Be=e("hr",{class:"hidden lg:block mt-1 mb-4"},null,-1),Te={class:"hidden lg:flex justify-center items-center gap-2 mt-2"},Ie={class:"w-1/3 mb-4"},Ve=e("label",{for:"metode_pembayaran",class:"block text-sm font-myFont font-medium text-gray-600"},"Metode Pembayaran:",-1),Se={class:"w-1/3 mb-4"},je=e("label",{for:"total_fee",class:"block text-sm font-myFont font-medium text-gray-600"},"Total Pembayaran:",-1),Ne={class:"w-1/3 mb-4"},qe=e("label",{for:"payment_code",class:"block text-sm font-myFont font-medium text-gray-600"},"Biaya Admin:",-1),Je={key:0,class:"flex justify-center h-52 pt-14 w-full"},Ke=e("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1),ze=[Ke],De={key:1,class:"-ml-2 flex flex-col gap-2 max-h-36 lg:max-h-48 mb-2"},Ae={class:"py-2 px-2 grid grid-cols-4 gap-2 overflow-y-scroll w-full"},Ee=["onClick"],Ge=["src","alt"],Re={class:"flex justify-end pt-2"};function He(_,s,i,t,n,o){const u=I("modalInfo"),d=I("PhInfo");return y(),b("section",re,[t.showModal?(y(),A(u,{key:0,onUnderstand:t.toggleModal},null,8,["onUnderstand"])):C("",!0),e("div",ie,[e("div",de,[e("div",me,[e("div",ce,[ue,m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.code_voucher=a),type:"text",name:"code_voucher",class:"mt-1 p-2 border placeholder:text-sm rounded-md w-full bg-white focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Kode"},null,512),[[c,t.code_voucher]])]),e("div",pe,[F(d,{size:28}),fe])]),ye,e("div",he,[e("div",ge,[be,m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.paymentType=a),type:"text",name:"metode_pembayaran",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Pilih Metode Pembayaran",readonly:""},null,512),[[c,t.paymentType]])]),e("div",_e,[xe,m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.totalFee=a),type:"text",name:"total_fee",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Rp.0",readonly:""},null,512),[[c,t.totalFee]])]),e("div",ve,[ke,m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>t.feePaymentMethod=a),type:"text",name:"payment_code",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Rp.0",readonly:""},null,512),[[c,t.feePaymentMethod]])])]),we,e("div",Pe,[e("div",Fe,[Me,m(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.code_voucher=a),type:"text",name:"code_voucher",class:"mt-1 p-2 border placeholder:text-sm rounded-md w-full bg-white focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Kode"},null,512),[[c,t.code_voucher]])]),e("div",Ce,[F(d,{size:20}),Ue])]),Be,e("div",Te,[e("div",Ie,[Ve,m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>t.paymentType=a),type:"text",name:"metode_pembayaran",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",readonly:""},null,512),[[c,t.paymentType]])]),e("div",Se,[je,m(e("input",{"onUpdate:modelValue":s[6]||(s[6]=a=>t.totalFee=a),type:"text",name:"total_fee",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",readonly:""},null,512),[[c,t.totalFee]])]),e("div",Ne,[qe,m(e("input",{"onUpdate:modelValue":s[7]||(s[7]=a=>t.feePaymentMethod=a),type:"text",name:"payment_code",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",readonly:""},null,512),[[c,t.feePaymentMethod]])])]),t.loadingFetch?(y(),b("div",Je,ze)):C("",!0),!t.loadingFetch&&t.paymentMethod?(y(),b("div",De,[e("div",Ae,[(y(!0),b(E,null,G(t.paymentMethod,(a,p)=>(y(),b("a",{onClick:k=>t.pilihPayment(a.paymentMethod,a.paymentName,a.totalFee),key:p,class:"cursor-pointer hover:animate-wiggle bg-white border rounded-lg shadow-sm px-2 py-2"},[e("img",{src:a.paymentImage,alt:a.paymentName},null,8,Ge)],8,Ee))),128))])])):C("",!0),e("div",Re,[e("button",{onClick:s[8]||(s[8]=(...a)=>t.submitPayment&&t.submitPayment(...a)),class:"bg-biru text-white font-myFont px-4 py-2 rounded-lg"}," Bayar ")])])])])}const Xe=z(le,[["render",He]]);export{Xe as default};
