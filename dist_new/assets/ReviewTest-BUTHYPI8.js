import{_ as L}from"./Layout-DbF8E-Tt.js";import{H as N}from"./PhCaretLeft.vue-Y_rwbqM1.js";import{G as E}from"./PhCaretRight.vue-DA-YUBxq.js";import{I as G}from"./newNavbar-BzZxYsYg.js";import{_ as I,e as i,g as V,f as H,h as K,s as k,q as h,S as w,r as P,o as f,c as b,a as l,b as y,w as S,d as C,E as p,k as q,v as M,F as z,L as A,j as J,D as O,J as U}from"./index-BLbGlZhr.js";import{_ as Y}from"./debounce-DEXiE2jx.js";import"./footer-BeIirRJy.js";import"./customerBottom-BQQFIdIY.js";import"./PhUser.vue-CCnuU2FN.js";import"./_baseGetTag-Dyeai_b1.js";const Q={name:"ReviewTest",components:{PhCaretLeft:N,PhCaretRight:E,PhFileSearch:G},setup(){const o=i(!1),n=i([]),u=i(""),t=i(null),_=i(null),g=i(null),c=i(null),d=i(null),v=i(null),m=i(null),r=i(null),x=V(),T=H();K(async()=>{D()});const D=async()=>{o.value=!o.value;const s=k.get("token");if(s)try{const a=await h("get","customers?is_detected=1",null,s);n.value=a.data.data,u.value=a.data.last_page,t.value=a.data.per_page,_.value=a.data.current_page,g.value=a.data.next_page_url,c.value=a.data.prev_page_url,d.value=a.data.from,v.value=a.data.to,m.value=a.data.total,o.value=!o.value}catch{w.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data",showConfirmButton:!1,timer:2e3})}else x.push("/login"),localStorage.clear()},B=async()=>{const s=k.get("token");if(s&&r.value!==""&&r.value.length>=2)try{o.value=!o.value;const a=await h("get","customers?is_detected=1&search="+r.value,null,s);n.value=a.data.data,u.value=a.data.total,t.value=a.data.per_page,_.value=a.data.current_page,g.value=a.data.next_page_url,c.value=a.data.prev_page_url,d.value=a.data.from,v.value=a.data.to,m.value=a.data.total,o.value=!o.value}catch{w.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data",showConfirmButton:!1,timer:2e3})}else if(!s)x.push("/login");else if(r.value=="")return D()},R=Y(B,500),j=s=>{w.fire({title:"Review Test?",text:"Ketika setuju status test customer akan berubah.",icon:"question",showCancelButton:!0,confirmButtonColor:"#0b40f4",cancelButtonColor:"#3b3f5c",confirmButtonText:"Ya, review",cancelButtonText:"Tutup"}).then(a=>{a.isConfirmed&&F(s)})},F=s=>{const a=s.id;T.commit("reviewGrafologi",s),x.push({name:"consultant.views.review.detail",params:{id:a}}),localStorage.setItem("reviewData",JSON.stringify(s))};return{loading:o,dataSubmit:n,totalHalaman:u,itemsPerPage:t,currPage:_,nextPage:g,prevPage:c,totalDari:d,totalKe:v,totalData:m,cari:r,debouncedGetSearchData:R,nextPages:async s=>{const a=k.get("token");if(a)try{if(s!==null&&r.value){o.value=!o.value;const e=await h("get",s+"&search="+r.value,null,a);n.value=e.data.data,u.value=e.data.last_page,t.value=e.data.per_page,_.value=e.data.current_page,g.value=e.data.next_page_url,c.value=e.data.prev_page_url,d.value=e.data.from,v.value=e.data.to,m.value=e.data.total,o.value=!o.value}else if(s!==null&&!r.value){o.value=!o.value;const e=await h("get",s,null,a);n.value=e.data.data,u.value=e.data.last_page,t.value=e.data.per_page,_.value=e.data.current_page,g.value=e.data.next_page_url,c.value=e.data.prev_page_url,d.value=e.data.from,v.value=e.data.to,m.value=e.data.total,o.value=!o.value}}catch{w.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data",showConfirmButton:!1,timer:2e3})}else x.push("/login"),localStorage.clear()},prevPages:async s=>{const a=k.get("token");if(a)try{if(s!==null&&r.value){o.value=!o.value;const e=await h("get",s+"&search="+r.value,null,a);n.value=e.data.data,u.value=e.data.last_page,t.value=e.data.per_page,_.value=e.data.current_page,g.value=e.data.next_page_url,c.value=e.data.prev_page_url,d.value=e.data.from,v.value=e.data.to,m.value=e.data.total,o.value=!o.value}else if(s!==null&&!r.value){o.value=!o.value;const e=await h("get",s+"&search="+r.value,null,a);n.value=e.data.data,u.value=e.data.last_page,t.value=e.data.per_page,_.value=e.data.current_page,g.value=e.data.next_page_url,c.value=e.data.prev_page_url,d.value=e.data.from,v.value=e.data.to,m.value=e.data.total,o.value=!o.value}}catch{w.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data",showConfirmButton:!1,timer:2e3})}},getSearchData:B,modalReview:j}}},W={class:"mx-4 pt-4"},X={class:"mx-4 flex justify-start items-center text-gray-500 font-semibold"},Z=l("span",{class:"mx-2 text-base text-gray-400"},"/",-1),$=l("span",{class:"text-gray-400 text-base"}," Test GIM ",-1),ee=l("span",{class:"mx-2 text-base"},"/",-1),te={class:"flex flex-col lg:flex-row justify-center mx-4 mb-4 pt-4 pb-10 gap-4"},ae={class:"w-full px-7 mx-auto"},le={class:"flex flex-col bg-white w-full p-6 rounded-lg shadow-lg"},oe=l("h1",{class:"font-myFont text-dark text-lg mb-4"},"List Submit Test Grafologi",-1),se={class:"flex flex-col md:flex-row md:items-center md:justify-between lg:flex-row lg:items-center lg:justify-between"},re={class:"font-myFont text-xs md:text-sm lg:text-sm text-start lg:text-center text-dark"},ne={key:0,class:"flex justify-center w-full"},ie=l("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1),ce=[ie],ue={key:1,class:"overflow-x-auto"},de={class:"w-full text-sm text-left text-gray-500"},ve=l("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[l("tr",null,[l("th",{scope:"col",class:"py-3 px-6"},"No"),l("th",{scope:"col",class:"py-3 px-6"},"Nama Customer"),l("th",{scope:"col",class:"py-3 px-6"},"Tanggal Submit"),l("th",{scope:"col",class:"py-3 px-6"},"Review")])],-1),me={class:"py-4 px-6"},_e={class:"py-4 px-6"},ge={class:"py-4 px-6"},pe={class:"py-4 px-6"},xe=["onClick"],fe={key:2,class:"font-myFont text-center text-dark text-lg"},he={class:"self-end mt-4"},be={class:"flex items-center font-myFont text-dark text-xs lg:text-base"},ye={class:"mx-2 flex items-center gap-1"},we={class:"px-2 py-1 border rounded-lg"};function ke(o,n,u,t,_,g){const c=P("RouterLink"),d=P("PhFileSearch"),v=P("PhCaretLeft"),m=P("PhCaretRight");return f(),b("section",{class:O(["bg-gray-100 pb-10",{"lg:pb-28 pb-48":t.dataSubmit.length==0,"lg:pb-7":t.dataSubmit.length>0}])},[l("div",W,[l("ol",X,[y(c,{to:{name:"views.dashboard"},class:"text-gray-400 hover:text-dark text-base"},{default:S(()=>[C(" Beranda ")]),_:1},8,["to"]),Z,$,ee,y(c,{to:{name:"consultant.views.review"},class:"text-base text-dark hover:text-dark/70"},{default:S(()=>[C(" Review Test ")]),_:1},8,["to"])])]),l("div",te,[l("div",ae,[l("div",le,[oe,l("div",se,[l("span",re,p(t.totalDari==null?0:t.totalDari)+" sampai "+p(t.totalKe==null?0:t.totalKe)+" dari "+p(t.totalData)+" data. ",1),q(l("input",{"onUpdate:modelValue":n[0]||(n[0]=r=>t.cari=r),onInput:n[1]||(n[1]=()=>t.debouncedGetSearchData()),type:"text",name:"cari",class:"mb-2 font-myFont rounded-md border border-gray-300 py-2 px-3",placeholder:"Cari Data"},null,544),[[M,t.cari]])]),t.loading?(f(),b("div",ne,ce)):t.dataSubmit.length>0&&!t.loading?(f(),b("div",ue,[l("table",de,[ve,l("tbody",null,[(f(!0),b(z,null,A(t.dataSubmit,(r,x)=>(f(),b("tr",{key:x,class:"bg-white border-b"},[l("td",me,p((t.currPage-1)*t.itemsPerPage+x+1),1),l("td",_e,p(r.name),1),l("td",ge,p(r.customers_results.created_at),1),l("td",pe,[l("button",{onClick:T=>t.modalReview(r),class:"flex items-center gap-1 px-4 py-2 bg-biru font-myFont text-sm text-white rounded-lg hover:bg-opacity-75 hover:shadow-lg"},[y(d,{size:22})],8,xe)])]))),128))])])])):t.dataSubmit.length==0&&!t.loading?(f(),b("span",fe,"Data kosong")):J("",!0),l("div",he,[l("a",be,[C(" Halaman "),l("div",ye,[l("a",{onClick:n[2]||(n[2]=r=>t.prevPages(t.prevPage)),class:"cursor-pointer text-sm md:text-base lg:text-xl text-dark text-opacity-70 hover:text-opacity-100 hover:shadow-sm"},[y(v)]),l("span",we,p(t.currPage),1),l("a",{onClick:n[3]||(n[3]=r=>t.nextPages(t.nextPage)),class:"cursor-pointer text-sm md:text-base lg:text-xl text-dark text-opacity-70 hover:text-opacity-100 hover:shadow-sm"},[y(m)])]),C(" Dari "+p(t.totalHalaman),1)])])])])])],2)}const Pe=I(Q,[["render",ke]]),Ie={__name:"ReviewTest",setup(o){return(n,u)=>(f(),U(L,null,{default:S(()=>[y(Pe)]),_:1}))}};export{Ie as default};
