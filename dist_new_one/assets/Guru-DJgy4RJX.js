import{_ as mt}from"./Layout-BXduHGGo.js";import{_ as et,g as ot,f as n,j as ut,o as l,c as i,a as t,G as d,l as x,v as P,F as N,k as p,b as h,w as V,H as Y,O as Z,T as Q,P as J,s as q,t as $,S as z,x as at,y as st,V as pt,W as ft,i as xt,r as I,d as j,L as nt}from"./index-Dthq0P5E.js";import{p as M}from"./purify.es-DX2bXU93.js";import{_ as lt}from"./debounce-BfGIqxBF.js";import{H as ht}from"./PhCaretLeft.vue-D9T1Eo6Q.js";import{G as gt}from"./PhCaretRight.vue-DARAl1TX.js";import{I as _t}from"./PhEye.vue-DCL_PPp9.js";import{I as bt}from"./PhPlus.vue-DtaRBO1n.js";import{G as yt}from"./PhTrash.vue-B6MooMgi.js";import"./newNavbar-CpKe0X2L.js";import"./customerBottom-BcFpgPsH.js";import"./PhUser.vue-C0cTronS.js";import"./footer-BpngaeQ9.js";import"./_baseGetTag-mTY04yK9.js";const vt={name:"FormRegistrasiKonsultan",props:["detailData","modalType"],setup(u,{emit:o}){const g=()=>{o("initRegistrasi")},e=ot(),y=n(""),T=n(""),a=n(""),f=n(""),k=n(""),w=n(""),D=n(""),L=n([]),F=n(null),_=n(!1),r=async()=>{const K=await q("get",`institutions?search=${f.value}`,null,null);L.value=K.data.data},S=lt(()=>{f.value!==""?(_.value=!0,r()):_.value=!1},500),C=(K,b)=>{k.value=K,_.value=!1,f.value=b},H=async()=>{const K=$.get("token"),b=new FormData;if(b.append("email",M.sanitize(y.value)),b.append("password",M.sanitize(T.value)),b.append("name",M.sanitize(a.value)),b.append("gender",M.sanitize(w.value)),b.append("type",M.sanitize(D.value)),b.append("institution_id",M.sanitize(k.value)),K)try{const R=await q("post","staffs",b,K);z.fire({icon:"success",title:"Registrasi Berhasil",text:R.data.message,showConfirmButton:!1,timer:2e3}),g(),e.go()}catch{z.fire({icon:"error",title:"Registrasi Gagal",text:"Terjadi Kesalahan",showConfirmButton:!1,timer:2e3})}else alert("haduh")},A=()=>{y.value&&!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(y.value)?F.value="Email tidak valid":F.value=null},X=ut(()=>!a.value||!y.value||!T.value||!f.value||!w.value||!D.value);return{searched:_,debouncedGetSearchData:S,pilihSekolah:C,emailInput:y,password:T,namaLengkap:a,sekolah:f,jenisKelamin:w,tipe:D,pilihanSekolah:L,validasiEmail:F,buttonDisabled:X,closeModal:g,register:H,validation:A,props:u}}},s=u=>(at("data-v-ddb8a192"),u=u(),st(),u),kt={class:"fixed z-[999] inset-0 bg-gray-900 bg-opacity-60 overflow-y-auto h-full w-full px-4 modal"},wt={class:"font-myFont text-dark text-lg mx-4 pt-4"},Ft=s(()=>t("hr",{class:"mt-4"},null,-1)),Pt={key:0,class:"w-full p-4"},Tt={class:"flex flex-wrap -mx-3 mb-6"},Dt={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},St=s(()=>t("label",{for:"email",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Email ",-1)),Ct={key:0,class:"font-myFont text-red-500 text-xs italic"},Kt={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},Gt=s(()=>t("label",{for:"password",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Password ",-1)),It={class:"flex flex-wrap -mx-3 mb-6"},Bt={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},Lt=s(()=>t("label",{for:"nama_lengkap",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Nama Lengkap ",-1)),jt={class:"relative w-full md:w-1/2 px-3"},Rt=s(()=>t("label",{for:"sekolah",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Sekolah / Perguruan Tinggi ",-1)),Et={class:"relative group"},Mt={key:0,id:"dropdown-menu",class:"w-full max-h-[140px] overflow-y-scroll absolute z-40 right-0 mt-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-1 space-y-1"},zt={key:0,class:"flex flex-col"},Vt=["onClick"],At={key:1},Ut=s(()=>t("span",{class:"hover:bg-neutral-500 mx-4 font-myFont text-xs lg:text-sm text-dark"}," Data sekolah tidak ada. ",-1)),Nt=[Ut],Ht={class:"flex flex-wrap -mx-3 mt-4"},Jt={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},qt=s(()=>t("label",{for:"email",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Jenis Kelamin ",-1)),Xt=s(()=>t("option",{value:"",selected:"",disabled:""},"Jenis Kelamin",-1)),Ot=s(()=>t("option",{value:"1"},"Laki - Laki",-1)),Wt=s(()=>t("option",{value:"2"},"Perempuan",-1)),Yt=[Xt,Ot,Wt],Zt={class:"w-full md:w-1/2 px-3"},Qt=s(()=>t("label",{for:"tipe",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Tipe ",-1)),$t=s(()=>t("option",{value:"",selected:"",disabled:""},"Pilih Tipe",-1)),te=s(()=>t("option",{value:"Kepala Sekolah"},"Kepala Sekolah",-1)),ee=s(()=>t("option",{value:"Guru BK"},"Guru BK",-1)),oe=[$t,te,ee],ae={key:1,class:"w-full p-4"},se={class:"flex flex-row gap-2"},ne={class:"w-full"},le={class:"flex flex-row items-center mb-4"},ie={class:"w-3/5"},re={class:"flex flex-col items-start"},de=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Nama ",-1)),ce={class:"font-myFont font-medium text-dark text-xs"},me={class:"w-2/5"},ue={class:"flex flex-col items-start"},pe=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Type ",-1)),fe={class:"font-myFont font-medium text-dark text-xs"},xe={class:"flex flex-row items-center mb-4"},he={class:"w-3/5"},ge={class:"flex flex-col items-start"},_e=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Jenis Kelamin ",-1)),be={class:"font-myFont font-medium text-dark text-xs"},ye={class:"w-2/5"},ve={class:"flex flex-col items-start"},ke=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Sekolah ",-1)),we={class:"font-myFont font-medium text-dark text-xs"},Fe={class:"flex flex-row items-center mb-4"},Pe={class:"w-3/5"},Te={class:"flex flex-col items-start"},De=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Region ",-1)),Se={class:"font-myFont font-medium text-dark text-xs"},Ce={class:"w-2/5"},Ke={class:"flex flex-col items-start"},Ge=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Institusi Pendidikan ",-1)),Ie={class:"font-myFont font-medium text-dark text-xs"},Be=s(()=>t("hr",{class:"pt-4"},null,-1)),Le={class:"px-4 py-4 flex justify-between items-center space-x-4"},je=["disabled"],Re={class:"block lg:hidden relative w-full top-1 mx-auto shadow-xl rounded-md bg-white"},Ee=s(()=>t("h1",{class:"font-myFont text-dark text-lg mx-4 pt-4"},"Detail Customers",-1)),Me=s(()=>t("hr",{class:"mt-4"},null,-1)),ze={key:0,class:"w-full p-4"},Ve={class:"flex flex-wrap -mx-3 mb-6"},Ae={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},Ue=s(()=>t("label",{for:"email",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Email ",-1)),Ne={key:0,class:"font-myFont text-red-500 text-xs italic"},He={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},Je=s(()=>t("label",{for:"password",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Password ",-1)),qe={class:"flex flex-wrap -mx-3 mb-6"},Xe={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},Oe=s(()=>t("label",{for:"nama_lengkap",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Nama Lengkap ",-1)),We={class:"relative w-full md:w-1/2 px-3"},Ye=s(()=>t("label",{for:"sekolah",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Sekolah / Perguruan Tinggi ",-1)),Ze={class:"relative group"},Qe={key:0,id:"dropdown-menu",class:"w-full max-h-[140px] overflow-y-scroll absolute z-40 right-0 mt-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-1 space-y-1"},$e={key:0,class:"flex flex-col"},to=["onClick"],eo={key:1},oo=s(()=>t("span",{class:"hover:bg-neutral-500 mx-4 font-myFont text-xs lg:text-sm text-dark"}," Data sekolah tidak ada. ",-1)),ao=[oo],so={class:"flex flex-wrap -mx-3 mt-4"},no={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},lo=s(()=>t("label",{for:"email",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Jenis Kelamin ",-1)),io=s(()=>t("option",{value:"",selected:"",disabled:""},"Jenis Kelamin",-1)),ro=s(()=>t("option",{value:"1"},"Laki - Laki",-1)),co=s(()=>t("option",{value:"2"},"Perempuan",-1)),mo=[io,ro,co],uo={class:"w-full md:w-1/2 px-3"},po=s(()=>t("label",{for:"tipe",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Tipe ",-1)),fo=s(()=>t("option",{value:"",selected:"",disabled:""},"Pilih Tipe",-1)),xo=s(()=>t("option",{value:"Kepala Sekolah"},"Kepala Sekolah",-1)),ho=s(()=>t("option",{value:"Guru BK"},"Guru BK",-1)),go=[fo,xo,ho],_o={key:1,class:"w-full p-4"},bo={class:"flex flex-row gap-2"},yo={class:"w-full"},vo={class:"flex flex-row items-center mb-4"},ko={class:"w-3/5"},wo={class:"flex flex-col items-start"},Fo=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Nama ",-1)),Po={class:"font-myFont font-medium text-dark text-xs"},To={class:"w-2/5"},Do={class:"flex flex-col items-start"},So=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Type ",-1)),Co={class:"font-myFont font-medium text-dark text-xs"},Ko={class:"flex flex-row items-center mb-4"},Go={class:"w-3/5"},Io={class:"flex flex-col items-start"},Bo=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Jenis Kelamin ",-1)),Lo={class:"font-myFont font-medium text-dark text-xs"},jo={class:"w-2/5"},Ro={class:"flex flex-col items-start"},Eo=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Sekolah ",-1)),Mo={class:"font-myFont font-medium text-dark text-xs"},zo={class:"flex flex-row items-center mb-4"},Vo={class:"w-3/5"},Ao={class:"flex flex-col items-start"},Uo=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Region ",-1)),No={class:"font-myFont font-medium text-dark text-xs"},Ho={class:"w-2/5"},Jo={class:"flex flex-col items-start"},qo=s(()=>t("h1",{class:"font-myFont font-medium text-dark text-base"}," Institusi Pendidikan ",-1)),Xo={class:"font-myFont font-medium text-dark text-xs"},Oo=s(()=>t("hr",{class:"pt-4"},null,-1)),Wo={class:"px-4 py-4 flex justify-between items-center space-x-4"},Yo=["disabled"];function Zo(u,o,g,e,y,T){return l(),i("div",kt,[t("div",{class:N([{"w-1/2":e.props.modalType=="detail","w-3/4":e.props.modalType!=="tambah"},"hidden lg:block relative top-10 mx-auto shadow-xl rounded-md bg-white"])},[t("h1",wt,d(e.props.modalType=="detail"?"Detail Guru":"Tambah Guru"),1),Ft,e.props.modalType=="tambah"?(l(),i("div",Pt,[t("div",Tt,[t("div",Dt,[St,x(t("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>e.emailInput=a),onKeyup:o[1]||(o[1]=(...a)=>e.validation&&e.validation(...a)),id:"email",class:N(["appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white",{"border-danger":e.validasiEmail!==null,"border-gray-200 focus:border-biru":e.validasiEmail==null}]),type:"email",placeholder:"Email"},null,34),[[P,e.emailInput]]),e.validasiEmail!==null?(l(),i("p",Ct,d(e.validasiEmail)+".",1)):p("",!0)]),t("div",Kt,[Gt,x(t("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>e.password=a),id:"password",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"password",placeholder:"Password"},null,512),[[P,e.password]])])]),t("div",It,[t("div",Bt,[Lt,x(t("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>e.namaLengkap=a),id:"nama_lengkap",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Nama Lengkap"},null,512),[[P,e.namaLengkap]])]),t("div",jt,[Rt,t("div",Et,[x(t("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>e.sekolah=a),onInput:o[5]||(o[5]=a=>e.debouncedGetSearchData()),id:"sekolah",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Sekolah / Perguruan Tinggi"},null,544),[[P,e.sekolah]]),h(Q,{name:"fade",mode:"out-in"},{default:V(()=>[e.searched?(l(),i("div",Mt,[e.searched&&e.pilihanSekolah.length>0?(l(),i("div",zt,[(l(!0),i(Y,null,Z(e.pilihanSekolah,(a,f)=>(l(),i("span",{key:f,onClick:k=>e.pilihSekolah(a.id,a.name),class:"hover:bg-neutral-200 py-2 px-4 cursor-pointer mx-4 font-myFont text-xs lg:text-sm text-dark"},d(a.name),9,Vt))),128))])):e.searched&&e.pilihanSekolah.length==0?(l(),i("div",At,Nt)):p("",!0)])):p("",!0)]),_:1})])])]),t("div",Ht,[t("div",Jt,[qt,x(t("select",{"onUpdate:modelValue":o[6]||(o[6]=a=>e.jenisKelamin=a),id:"jenis_kelamin",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru"},Yt,512),[[J,e.jenisKelamin]])]),t("div",Zt,[Qt,x(t("select",{"onUpdate:modelValue":o[7]||(o[7]=a=>e.tipe=a),id:"tipe",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru"},oe,512),[[J,e.tipe]])])])])):e.props.modalType=="detail"?(l(),i("div",ae,[t("div",se,[t("div",ne,[t("div",le,[t("div",ie,[t("div",re,[de,t("p",ce,d(e.props.detailData.name),1)])]),t("div",me,[t("div",ue,[pe,t("p",fe,d(e.props.detailData.type),1)])])]),t("div",xe,[t("div",he,[t("div",ge,[_e,t("p",be,d(e.props.detailData.formatted_gender),1)])]),t("div",ye,[t("div",ve,[ke,t("p",we,d(e.props.detailData.institutions.name),1)])])]),t("div",Fe,[t("div",Pe,[t("div",Te,[De,t("p",Se,d(e.props.detailData.institutions.region),1)])]),t("div",Ce,[t("div",Ke,[Ge,t("p",Ie,d(e.props.detailData.institutions.type),1)])])])])])])):p("",!0),Be,t("div",Le,[t("button",{onClick:o[8]||(o[8]=(...a)=>e.closeModal&&e.closeModal(...a)),class:"bg-gray-300 font-myFont text-black p-2 rounded-md hover:shadow-lg hover:opacity-80 transition duration-300 ease-in-out"},"Tutup"),e.props.modalType!=="detail"?(l(),i("button",{key:0,onClick:o[9]||(o[9]=(...a)=>e.register&&e.register(...a)),disabled:e.buttonDisabled,class:N([{"bg-gray-600 opacity-80 cursor-not-allowed":e.buttonDisabled},"rounded-lg px-4 py-2 bg-biru text-light font-myFont hover:bg-opacity-75 hover:shadow-md"])}," Submit ",10,je)):p("",!0)])],2),t("div",Re,[Ee,Me,e.props.modalType=="tambah"?(l(),i("div",ze,[t("div",Ve,[t("div",Ae,[Ue,x(t("input",{"onUpdate:modelValue":o[10]||(o[10]=a=>e.emailInput=a),onKeyup:o[11]||(o[11]=(...a)=>e.validation&&e.validation(...a)),id:"email",class:N(["appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white",{"border-danger":e.validasiEmail!==null,"border-gray-200 focus:border-biru":e.validasiEmail==null}]),type:"email",placeholder:"Email"},null,34),[[P,e.emailInput]]),e.validasiEmail!==null?(l(),i("p",Ne,d(e.validasiEmail)+".",1)):p("",!0)]),t("div",He,[Je,x(t("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>e.password=a),id:"password",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"password",placeholder:"Password"},null,512),[[P,e.password]])])]),t("div",qe,[t("div",Xe,[Oe,x(t("input",{"onUpdate:modelValue":o[13]||(o[13]=a=>e.namaLengkap=a),id:"nama_lengkap",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Nama Lengkap"},null,512),[[P,e.namaLengkap]])]),t("div",We,[Ye,t("div",Ze,[x(t("input",{"onUpdate:modelValue":o[14]||(o[14]=a=>e.sekolah=a),onInput:o[15]||(o[15]=a=>e.debouncedGetSearchData()),id:"sekolah",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Sekolah / Perguruan Tinggi"},null,544),[[P,e.sekolah]]),h(Q,{name:"fade",mode:"out-in"},{default:V(()=>[e.searched?(l(),i("div",Qe,[e.searched&&e.pilihanSekolah.length>0?(l(),i("div",$e,[(l(!0),i(Y,null,Z(e.pilihanSekolah,(a,f)=>(l(),i("span",{key:f,onClick:k=>e.pilihSekolah(a.id,a.name),class:"hover:bg-neutral-200 py-2 px-4 cursor-pointer mx-4 font-myFont text-xs lg:text-sm text-dark"},d(a.name),9,to))),128))])):e.searched&&e.pilihanSekolah.length==0?(l(),i("div",eo,ao)):p("",!0)])):p("",!0)]),_:1})])])]),t("div",so,[t("div",no,[lo,x(t("select",{"onUpdate:modelValue":o[16]||(o[16]=a=>e.jenisKelamin=a),id:"jenis_kelamin",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru"},mo,512),[[J,e.jenisKelamin]])]),t("div",uo,[po,x(t("select",{"onUpdate:modelValue":o[17]||(o[17]=a=>e.tipe=a),id:"tipe",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru"},go,512),[[J,e.tipe]])])])])):e.props.modalType=="detail"?(l(),i("div",_o,[t("div",bo,[t("div",yo,[t("div",vo,[t("div",ko,[t("div",wo,[Fo,t("p",Po,d(e.props.detailData.name),1)])]),t("div",To,[t("div",Do,[So,t("p",Co,d(e.props.detailData.type),1)])])]),t("div",Ko,[t("div",Go,[t("div",Io,[Bo,t("p",Lo,d(e.props.detailData.formatted_gender),1)])]),t("div",jo,[t("div",Ro,[Eo,t("p",Mo,d(e.props.detailData.institutions.name),1)])])]),t("div",zo,[t("div",Vo,[t("div",Ao,[Uo,t("p",No,d(e.props.detailData.institutions.region),1)])]),t("div",Ho,[t("div",Jo,[qo,t("p",Xo,d(e.props.detailData.institutions.type),1)])])])])])])):p("",!0),Oo,t("div",Wo,[t("button",{onClick:o[18]||(o[18]=(...a)=>e.closeModal&&e.closeModal(...a)),class:"bg-gray-300 font-myFont text-black p-2 rounded-md hover:shadow-lg hover:opacity-80 transition duration-300 ease-in-out"},"Tutup"),e.props.modalType!=="detail"?(l(),i("button",{key:0,onClick:o[19]||(o[19]=(...a)=>e.register&&e.register(...a)),disabled:e.buttonDisabled,class:N([{"bg-gray-600 opacity-80 cursor-not-allowed":e.buttonDisabled},"rounded-lg px-4 py-2 bg-biru text-light font-myFont hover:bg-opacity-75 hover:shadow-md"])}," Submit ",10,Yo)):p("",!0)])])])}const Qo=et(vt,[["render",Zo],["__scopeId","data-v-ddb8a192"]]),$o={name:"DataGuru",components:{PhPlus:bt,PhCaretLeft:ht,PhCaretRight:gt,PhEye:_t,PhTrash:yt,PhX:pt,ModalTambahGuru:Qo},setup(){const u=ot(),o=n(!1),g=n(!1),e=n([]),y=n(""),T=n(null),a=n(null),f=n(null),k=n(null),w=n(null),D=n(null),L=n(null),F=n(null);n("Tingkat Pendidikan");const _=n(!1),r=n(!1),S=n(!1),C=n(!1),H=n(""),A=n(""),X=async c=>{const v=$.get("token");if(v)try{const m=await q("delete",`staffs/${c}`,null,v);z.fire({icon:"success",title:"Data Berhasil Dihapus",text:m.data.message,showConfirmButton:!1,timer:2e3}),E()}catch{z.fire({icon:"error",title:"Gagal Hapus Data",text:"Terjadi Kesalahan Saat Hapus Data",showConfirmButton:!1,timer:2e3})}else u.push("/login"),localStorage.clear()},K=(c,v)=>{if(v=="detail"){const m=e.value.find(U=>U.id===c);H.value=m,A.value=v,W()}else v=="delete"?z.fire({icon:"warning",title:"Hapus Data Ini?",text:"Data yang dihapus tidak bisa di kembalikan.",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#0b40f4",confirmButtonText:"Ya, Hapus",cancelButtonColor:"#3b3f5c",cancelButtonText:"Batal"}).then(m=>{m.isConfirmed&&X(c)}):(A.value=v,W())},b=c=>{c=="type"?_.value=!_.value:r.value=!r.value},R=n(null),O=n(null),tt=c=>{R.value&&!R.value.contains(c.target)&&(_.value=!1),O.value&&!O.value.contains(c.target)&&(r.value=!1)};ft(()=>{document.body.removeEventListener("click",tt)});const W=()=>{o.value=!o.value};xt(async()=>{E(),document.body.addEventListener("click",tt)});const G={search:"",page:"",type:"All",institution_type:"All"},E=async()=>{g.value=!g.value;let c="?";for(const[m,U]of Object.entries(G))c=U!=""&&U!="All"?c+="&"+m+"="+U:c;const v=$.get("token");if(v)try{const m=await q("get","staffs"+c.replace("?&","?"),null,v);e.value=m.data.data,y.value=m.data.last_page,T.value=m.data.per_page,a.value=m.data.current_page,f.value=m.data.next_page_url,k.value=m.data.prev_page_url,w.value=m.data.from,D.value=m.data.to,L.value=m.data.total,g.value=!g.value}catch{z.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data",showConfirmButton:!1,timer:2e3})}},it=c=>{S.value=!0,G.type=c,E()},rt=c=>{C.value=!0,G.institution_type=c,E()},dt=c=>{c=="type"?(G.type="All",S.value=!1):(G.institution_type="All",C.value=!1),E()},ct=lt(()=>{G.search=F.value!==""?F.value:"",G.page="",E()},500);return{loading:g,isModalTambahGuru:o,queryParams:G,toggleTambahGuru:W,dataGuru:e,totalHalaman:y,itemsPerPage:T,currPage:a,nextPage:f,prevPage:k,totalDari:w,totalKe:D,totalData:L,cari:F,detailData:H,modalType:A,debouncedGetSearchData:ct,showFilterType:_,showFilterTypePendidikan:r,dropdownRef:R,dropdownInstitutionRef:O,filterRole:S,filterInstitution:C,filterInstitution:C,toggleFilter:b,filterTipe:it,filterInstitutionTipe:rt,resetFilter:dt,btnAction:K}}},B=u=>(at("data-v-5fe6f568"),u=u(),st(),u),ta={class:"bg-gray-100 pb-28"},ea={class:"mx-4 pt-4"},oa={class:"mx-4 flex justify-start items-center text-gray-500 font-semibold"},aa=B(()=>t("span",{class:"mx-2 text-base text-gray-400"},"/",-1)),sa=B(()=>t("span",{class:"text-gray-400 text-base"}," Users ",-1)),na=B(()=>t("span",{class:"mx-2 text-base"},"/",-1)),la={class:"flex flex-col lg:flex-row justify-center mx-4 mb-4 pt-4 pb-10 gap-4"},ia={class:"w-full px-7 mx-auto"},ra={class:"flex flex-col bg-white w-full p-6 rounded-lg shadow-lg"},da=B(()=>t("h1",{class:"font-myFont text-dark text-lg mb-4"},"List Kepsek / Guru BK",-1)),ca={class:"w-1/6 flex items-center gap-1 mb-2"},ma={class:"flex flex-col md:flex-row md:items-center md:justify-between lg:flex-row lg:items-center lg:justify-between"},ua={class:"flex items-center gap-2 mb-2"},pa={class:"w-full flex items-center gap-1"},fa=B(()=>t("svg",{class:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})],-1)),xa={key:0,class:"absolute left-22 top-[350px] z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},ha={class:"py-1",role:"none"},ga={class:"w-full flex items-center gap-1"},_a=B(()=>t("svg",{class:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})],-1)),ba={key:1,class:"absolute left-22 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},ya={class:"py-1",role:"none"},va={key:0,class:"flex justify-center w-full"},ka=B(()=>t("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1)),wa=[ka],Fa={key:1,class:"overflow-x-auto"},Pa={class:"w-full text-sm text-left text-gray-500"},Ta=B(()=>t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"py-3 px-6"},"No"),t("th",{scope:"col",class:"py-3 px-6"},"Nama"),t("th",{scope:"col",class:"py-3 px-6"},"Role"),t("th",{scope:"col",class:"py-3 px-6"},"Sekolah"),t("th",{scope:"col",class:"py-3 px-6"},"Aksi")])],-1)),Da={class:"py-4 px-6"},Sa={class:"py-4 px-6"},Ca={class:"py-4 px-6"},Ka={class:"py-4 px-6"},Ga={class:"flex items-center gap-2 py-4 px-6"},Ia=["onClick"],Ba=["onClick"],La={key:2,class:"font-myFont text-center text-dark text-lg"},ja={class:"flex justify-between items-center mt-4"},Ra={class:"font-myFont text-xs md:text-sm lg:text-sm text-start lg:text-center text-dark"},Ea={class:"flex items-center font-myFont text-dark text-xs lg:text-base"},Ma={class:"mx-2 flex items-center gap-1"},za={class:"px-2 py-1 border rounded-lg"};function Va(u,o,g,e,y,T){const a=I("RouterLink"),f=I("ModalTambahGuru"),k=I("PhPlus"),w=I("PhX"),D=I("PhEye"),L=I("PhTrash"),F=I("PhCaretLeft"),_=I("PhCaretRight");return l(),i("section",ta,[t("div",ea,[t("ol",oa,[h(a,{to:{name:"views.dashboard"},class:"text-gray-400 hover:text-dark text-base"},{default:V(()=>[j(" Beranda ")]),_:1},8,["to"]),aa,sa,na,h(a,{to:{name:"admin.views.guru"},class:"text-base text-dark hover:text-dark/70"},{default:V(()=>[j(" Data Guru ")]),_:1},8,["to"])])]),h(Q,{name:"fade",mode:"out-in"},{default:V(()=>[e.isModalTambahGuru==!0?(l(),nt(f,{key:0,detailData:e.detailData,modalType:e.modalType,onInitRegistrasi:e.toggleTambahGuru},null,8,["detailData","modalType","onInitRegistrasi"])):p("",!0)]),_:1}),t("div",la,[t("div",ia,[t("div",ra,[da,t("div",ca,[t("button",{onClick:o[0]||(o[0]=r=>e.btnAction(null,"tambah")),type:"button",class:"mb-2 md:mb-0 lg:mb-0 font-myFont flex w-full justify-center items-center gap-x-1.5 rounded-md bg-biru px-3 py-2 text-sm font-medium text-light hover:bg-opacity-75 hover:shadow-md"},[h(k,{size:20}),j(" Registrasi Kepsek / BK ")])]),t("div",ma,[t("div",ua,[t("div",pa,[t("button",{onClick:o[1]||(o[1]=r=>e.toggleFilter("type")),ref:"dropdownRef",type:"button",class:"mb-2 md:mb-0 lg:mb-0 font-myFont inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-medium text-dark shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},[j(d(e.queryParams.type=="All"?"Role":e.queryParams.type)+" ",1),fa],512),e.filterRole?(l(),i("button",{key:0,onClick:o[2]||(o[2]=r=>e.resetFilter("type")),class:"text-light p-[2px] bg-danger rounded-md"},[h(w)])):p("",!0)]),e.showFilterType?(l(),i("div",xa,[t("div",ha,[t("a",{onClick:o[3]||(o[3]=r=>e.filterTipe("Guru BK")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," Guru BK "),t("a",{onClick:o[4]||(o[4]=r=>e.filterTipe("Kepala Sekolah")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," Kepala Sekolah ")])])):p("",!0),t("div",ga,[t("button",{onClick:o[5]||(o[5]=(...r)=>e.toggleFilter&&e.toggleFilter(...r)),ref:"dropdownInstitutionRef",type:"button",class:"mb-2 md:mb-0 lg:mb-0 font-myFont inline-flex w-full lg:w-[168px] justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-medium text-dark shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},[j(d(e.queryParams.institution_type=="All"?"Tingkat Pendidikan":e.queryParams.institution_type)+" ",1),_a],512),e.filterInstitution?(l(),i("button",{key:0,onClick:o[6]||(o[6]=r=>e.resetFilter("institution")),class:"text-light p-[2px] bg-danger rounded-md"},[h(w)])):p("",!0)]),e.showFilterTypePendidikan?(l(),i("div",ba,[t("div",ya,[t("a",{onClick:o[7]||(o[7]=r=>e.filterInstitutionTipe("SD")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SD "),t("a",{onClick:o[8]||(o[8]=r=>e.filterInstitutionTipe("SMP")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SMP "),t("a",{onClick:o[9]||(o[9]=r=>e.filterInstitutionTipe("SMA")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SMA "),t("a",{onClick:o[10]||(o[10]=r=>e.filterInstitutionTipe("SMK")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SMK ")])])):p("",!0)]),x(t("input",{"onUpdate:modelValue":o[11]||(o[11]=r=>e.cari=r),onInput:o[12]||(o[12]=()=>e.debouncedGetSearchData()),type:"text",name:"cari",class:"mb-3 font-myFont rounded-md border border-gray-300 py-2 px-3",placeholder:"Cari Data"},null,544),[[P,e.cari]])]),e.loading?(l(),i("div",va,wa)):e.dataGuru.length>0&&!e.loading?(l(),i("div",Fa,[t("table",Pa,[Ta,t("tbody",null,[(l(!0),i(Y,null,Z(e.dataGuru,(r,S)=>(l(),i("tr",{key:S,class:"bg-white border-b"},[t("td",Da,d((e.currPage-1)*e.itemsPerPage+S+1),1),t("td",Sa,d(r.name),1),t("td",Ca,d(r.type),1),t("td",Ka,d(r.institutions.name),1),t("td",Ga,[t("button",{onClick:C=>e.btnAction(r.id,"detail"),class:"flex items-center gap-1 px-4 py-2 bg-biru font-myFont text-sm text-white rounded-lg hover:bg-opacity-75 hover:shadow-lg"},[h(D,{size:22})],8,Ia),t("button",{onClick:C=>e.btnAction(r.id,"delete"),class:"flex items-center gap-1 px-4 py-2 bg-danger font-myFont text-sm text-white rounded-lg hover:bg-opacity-75 hover:shadow-lg"},[h(L,{size:22})],8,Ba)])]))),128))])])])):e.dataGuru.length==0&&!e.loading?(l(),i("span",La,"Data kosong")):p("",!0),t("div",ja,[t("span",Ra,d(e.totalDari==null?0:e.totalDari)+" sampai "+d(e.totalKe==null?0:e.totalKe)+" dari "+d(e.totalData)+" data. ",1),t("a",Ea,[j(" Halaman "),t("div",Ma,[t("a",{onClick:o[13]||(o[13]=r=>u.prevPages(e.prevPage)),class:"cursor-pointer text-sm md:text-base lg:text-xl text-dark text-opacity-70 hover:text-opacity-100 hover:shadow-sm"},[h(F)]),t("span",za,d(e.currPage),1),t("a",{onClick:o[14]||(o[14]=r=>u.nextPages(e.nextPage)),class:"cursor-pointer text-sm md:text-base lg:text-xl text-dark text-opacity-70 hover:text-opacity-100 hover:shadow-sm"},[h(_)])]),j(" Dari "+d(e.totalHalaman),1)])])])])])])}const Aa=et($o,[["render",Va],["__scopeId","data-v-5fe6f568"]]),os={__name:"Guru",setup(u){return(o,g)=>(l(),nt(mt,null,{default:V(()=>[h(Aa)]),_:1}))}};export{os as default};
