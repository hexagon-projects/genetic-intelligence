import{_ as V}from"./Layout-BXduHGGo.js";import{_ as U,g as D,f as l,i as R,j as T,r as A,o,c as s,a as e,b as v,w,d as k,l as m,v as p,G as S,k as _,F as H,t as N,s as h,S as y,L as E}from"./index-Dthq0P5E.js";import"./newNavbar-CpKe0X2L.js";import"./customerBottom-BcFpgPsH.js";import"./PhUser.vue-C0cTronS.js";import"./footer-BpngaeQ9.js";const I={name:"PengaturanHarga",setup(){const i=D(),a=l(!1),g=l(null),t=l(null),x=l(null),u=l(null),r=l(null),n=l(null),C=()=>{isNaN(t.value)?r.value="Harga harus berupa angka":isNaN(u.value)?n.value="Harga harus berupa angka":(r.value=null,n.value=null)},F=async d=>{const c=N.get("token");if(c)try{const f={price:d=="student"?t.value:u.value};let b=d=="student"?"register-student":"register-non-student";const B=await h("put",`register/payment/${b}`,JSON.stringify(f),c);y.fire({icon:"success",title:"Harga Diubah",text:B.data.message,showConfirmButton:!1,timer:2e3}),setTimeout(()=>{i.go()},250)}catch{y.fire({icon:"error",title:"Terjadi Error",text:"Ada error sistem saat merubah harga",showConfirmButton:!1,timer:2e3})}else i.push("/login"),localStorage.clear()},j=async()=>{const d=N.get("token");if(d)try{a.value=!a.value;const c=await h("get","register/payment?type=register-student",null,d),f=await h("get","register/payment?type=register-non-student",null,d);Promise.all([c,f]).then(b=>{g.value=b[0].data.price,x.value=b[1].data.price}),a.value=!a.value}catch{y.fire({icon:"error",title:"Terjadi Error",text:"Ada error saat mengambil data harga",showConfirmButton:!1,timer:2e3})}else i.push("/login"),localStorage.clear()};R(async()=>{j()});const P=T(()=>t.value==null||u.value==null);return{loading:a,hargaStudent:g,hargaNonStudent:x,updatedHargaStudent:t,updatedHargaNonStudent:u,validasiStudent:r,validasiNonStudent:n,validation:C,updateHarga:F,buttonDisabled:P}}},L={class:"bg-gray-100 pb-[340px] lg:pb-28"},M={class:"mx-4 pt-4"},z={class:"mx-4 flex justify-start items-center text-gray-500 font-semibold"},G=e("span",{class:"mx-2 text-base text-gray-400"},"/",-1),J=e("span",{class:"text-gray-400 text-base"}," Pengaturan ",-1),O=e("span",{class:"mx-2 text-base"},"/",-1),q={class:"flex flex-col lg:flex-row justify-center mx-4 mb-4 pt-4 pb-10 gap-4"},K={class:"w-full lg:w-1/2"},Q={class:"flex flex-col bg-white w-full p-6 rounded-lg shadow-lg"},W=e("h1",{class:"font-myFont text-dark text-lg mb-4"},"Harga Registrasi Pelajar",-1),X={key:0,class:"flex justify-center pt-8 mb-[55px] w-full"},Y=e("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1),Z=[Y],$={key:1,class:"flex flex-col"},tt={class:"flex flex-wrap -mx-3 mb-6"},et={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},at=e("label",{for:"nama_lengkap",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Harga saat ini ",-1),nt={class:"w-full md:w-1/2 px-3"},ot=e("label",{for:"fee",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Harga baru ",-1),lt={key:0,class:"font-myFont text-red-500 text-xs italic"},st=["disabled"],rt={class:"w-full lg:w-1/2"},dt={class:"flex flex-col bg-white w-full p-6 rounded-lg shadow-lg"},it=e("h1",{class:"font-myFont text-dark text-lg mb-4"},"Harga Registrasi Non-Pelajar",-1),ut={key:0,class:"flex justify-center pt-8 mb-[55px] w-full"},ct=e("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1),gt=[ct],ft={key:1,class:"flex flex-col"},bt={class:"flex flex-wrap -mx-3 mb-6"},mt={class:"w-full md:w-1/2 px-3 mb-6 md:mb-0"},pt=e("label",{for:"nama_lengkap",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Harga saat ini ",-1),_t={class:"w-full md:w-1/2 px-3"},xt=e("label",{for:"fee",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Harga baru ",-1),ht={key:0,class:"font-myFont text-red-500 text-xs italic"},yt=["disabled"];function vt(i,a,g,t,x,u){const r=A("RouterLink");return o(),s("section",L,[e("div",M,[e("ol",z,[v(r,{to:{name:"views.dashboard"},class:"text-gray-400 hover:text-dark text-base"},{default:w(()=>[k(" Beranda ")]),_:1},8,["to"]),G,J,O,v(r,{to:{name:"admin.views.pengaturan_harga"},class:"text-base text-dark hover:text-dark/70"},{default:w(()=>[k(" Pengaturan Harga ")]),_:1},8,["to"])])]),e("div",q,[e("div",K,[e("div",Q,[W,t.loading?(o(),s("div",X,Z)):t.loading?_("",!0):(o(),s("div",$,[e("div",tt,[e("div",et,[at,m(e("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>t.hargaStudent=n),id:"nama_lengkap",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none",type:"text",readonly:""},null,512),[[p,t.hargaStudent]])]),e("div",nt,[ot,m(e("input",{id:"fee","onUpdate:modelValue":a[1]||(a[1]=n=>t.updatedHargaStudent=n),onInput:a[2]||(a[2]=(...n)=>t.validation&&t.validation(...n)),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Contoh: 500000"},null,544),[[p,t.updatedHargaStudent]]),t.validasiStudent!==null?(o(),s("p",lt,S(t.validasiStudent)+".",1)):_("",!0)])]),e("button",{disabled:t.validasiStudent||t.updatedHargaStudent==null||t.updatedHargaStudent=="",onClick:a[3]||(a[3]=n=>t.updateHarga("student")),class:H([{"bg-gray-600 opacity-80 cursor-not-allowed":t.validasiStudent||t.updatedHargaStudent==null||t.updatedHargaStudent==""},"w-1/3 self-center rounded-lg px-4 py-2 bg-biru text-light font-myFont hover:bg-opacity-75 hover:shadow-md"])}," Ubah Harga ",10,st)]))])]),e("div",rt,[e("div",dt,[it,t.loading?(o(),s("div",ut,gt)):t.loading?_("",!0):(o(),s("div",ft,[e("div",bt,[e("div",mt,[pt,m(e("input",{"onUpdate:modelValue":a[4]||(a[4]=n=>t.hargaNonStudent=n),id:"nama_lengkap",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none",type:"text",readonly:""},null,512),[[p,t.hargaNonStudent]])]),e("div",_t,[xt,m(e("input",{id:"fee","onUpdate:modelValue":a[5]||(a[5]=n=>t.updatedHargaNonStudent=n),onInput:a[6]||(a[6]=(...n)=>t.validation&&t.validation(...n)),class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Contoh: 500000"},null,544),[[p,t.updatedHargaNonStudent]]),t.validasiNonStudent!==null?(o(),s("p",ht,S(t.validasiNonStudent)+".",1)):_("",!0)])]),e("button",{disabled:t.validasiNonStudent||t.updatedHargaNonStudent==null||t.updatedHargaNonStudent=="",onClick:a[7]||(a[7]=n=>t.updateHarga("nonstudent")),class:H([{"bg-gray-600 opacity-80 cursor-not-allowed":t.validasiNonStudent||t.updatedHargaNonStudent==null||t.updatedHargaNonStudent==""},"w-1/3 self-center rounded-lg px-4 py-2 bg-biru text-light font-myFont hover:bg-opacity-75 hover:shadow-md"])}," Ubah Harga ",10,yt)]))])])])])}const wt=U(I,[["render",vt]]),jt={__name:"Harga",setup(i){return(a,g)=>(o(),E(V,null,{default:w(()=>[v(wt)]),_:1}))}};export{jt as default};
