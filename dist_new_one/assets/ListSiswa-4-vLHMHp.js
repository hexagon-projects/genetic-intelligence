import{f as l,X as B,o,c as r,a as e,H as I,O as M,G as v,b as y,p as le,V as se,k as j,i as oe,j as ne,g as ie,L as re,w as ue,t as R,s as O,S as T,F as E,d as D,l as H,P as de,v as ce,K as ve}from"./index-Dthq0P5E.js";import{_ as pe}from"./Layout-PL0RkqWX.js";import{l as ge}from"./lodash-D8UbcAn0.js";import"./customerBottom-BcFpgPsH.js";import"./PhUser.vue-C0cTronS.js";const me="data:image/svg+xml,%3csvg%20width='13'%20height='10'%20viewBox='0%200%2013%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.122437%201C0.122437%200.447715%200.570152%200%201.12244%200H11.1224C11.6747%200%2012.1224%200.447715%2012.1224%201C12.1224%201.55228%2011.6747%202%2011.1224%202H1.12244C0.570152%202%200.122437%201.55228%200.122437%201ZM2.12244%205C2.12244%204.44772%202.57015%204%203.12244%204H9.12244C9.67472%204%2010.1224%204.44772%2010.1224%205C10.1224%205.55228%209.67472%206%209.12244%206H3.12244C2.57015%206%202.12244%205.55228%202.12244%205ZM5.12244%208C4.57015%208%204.12244%208.44771%204.12244%209C4.12244%209.55229%204.57015%2010%205.12244%2010H7.12244C7.67472%2010%208.12244%209.55229%208.12244%209C8.12244%208.44771%207.67472%208%207.12244%208H5.12244Z'%20fill='%2332324D'/%3e%3c/svg%3e",be="data:image/svg+xml,%3csvg%20width='6'%20height='10'%20viewBox='0%200%206%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%208.825L2.2915%205L6%201.175L4.8583%200L0%205L4.8583%2010L6%208.825Z'%20fill='%23666687'/%3e%3c/svg%3e",fe="data:image/svg+xml,%3csvg%20width='6'%20height='10'%20viewBox='0%200%206%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%208.825L3.7085%205L0%201.175L1.1417%200L6%205L1.1417%2010L0%208.825Z'%20fill='%23666687'/%3e%3c/svg%3e",_e={class:"flex items-center gap-1"},he={class:"text-[#32324D] font-['Roboto'] leading-loose relative"},xe=["name","value"],we=["value"],ke=e("svg",{width:"8",height:"4",viewBox:"0 0 8 4",fill:"none",class:"absolute right-3 top-1/2 transform -translate-y-1/2",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.5 0.444444C7.5 0.564815 7.45671 0.668981 7.37012 0.756944L4.30762 3.86806C4.22103 3.95602 4.11849 4 4 4C3.88151 4 3.77897 3.95602 3.69238 3.86806L0.629883 0.756944C0.543294 0.668981 0.5 0.564815 0.5 0.444444C0.5 0.324074 0.543294 0.219907 0.629883 0.131944C0.716471 0.0439815 0.81901 0 0.9375 0H7.0625C7.18099 0 7.28353 0.0439815 7.37012 0.131944C7.45671 0.219907 7.5 0.324074 7.5 0.444444Z",fill:"#8E8EA9"})],-1),$={__name:"FilterItem",props:{label:String,modelValue:String,options:Array},emits:["update:modelValue","reset"],setup(f,{emit:u}){const m=f,b=l(!1);return B(()=>m.modelValue,p=>{b.value=p!==""}),(p,g)=>(o(),r("div",_e,[e("div",he,[e("select",{name:f.label,value:f.modelValue,onInput:g[0]||(g[0]=d=>p.$emit("update:modelValue",d.target.value)),class:"p-1 px-3 pr-10 rounded-lg bg-white border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none"},[(o(!0),r(I,null,M(f.options,(d,N)=>(o(),r("option",{key:N,value:d.value,class:"font-roboto"},v(d.value===""?f.label:d.label),9,we))),128))],40,xe),ke]),b.value?(o(),r("button",{key:0,onClick:g[1]||(g[1]=d=>p.$emit("reset")),class:"text-light p-[2px] bg-danger rounded-md"},[y(le(se))])):j("",!0)]))}},ye={key:0,class:"preloader-overlay"},Ce=e("span",{class:"flex justify-center animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14 m-auto"},null,-1),Le=[Ce],Ke={class:"bg-white py-[66px] px-[20px] md:px-[60px]"},Ve={class:"flex flex-col gap-[36px]"},$e={class:"flex justify-between items-center mb-5"},Ie={class:"text-[#32324D] font-['Roboto'] leading-loose"},Se=e("div",{class:"text-xl md:text-3xl font-semibold"},"List Siswa",-1),Ee={class:"text-gray-500 text-sm"},Be=e("button",{class:"text-white rounded-md py-2 px-3 bg-[#12B76A] font-medium flex items-center gap-3"},[e("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10.5 7.5V9.5C10.5 9.76522 10.3946 10.0196 10.2071 10.2071C10.0196 10.3946 9.76522 10.5 9.5 10.5H2.5C2.23478 10.5 1.98043 10.3946 1.79289 10.2071C1.60536 10.0196 1.5 9.76522 1.5 9.5V7.5M3.5 5L6 7.5M6 7.5L8.5 5M6 7.5V1.5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),D(" Export Data ")],-1),Me={class:"flex flex-col gap-[13px] mb-3"},je={class:"flex flex-wrap justify-between items-center gap-4"},De={class:"flex items-center gap-2"},Ne=e("img",{src:me,alt:"icon"},null,-1),Pe={class:"text-[#32324D] font-['Roboto'] leading-loose relative"},Ae=["value"],Fe=e("svg",{width:"8",height:"4",viewBox:"0 0 8 4",fill:"none",class:"absolute right-3 top-1/2 transform -translate-y-1/2",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.5 0.444444C7.5 0.564815 7.45671 0.668981 7.37012 0.756944L4.30762 3.86806C4.22103 3.95602 4.11849 4 4 4C3.88151 4 3.77897 3.95602 3.69238 3.86806L0.629883 0.756944C0.543294 0.668981 0.5 0.564815 0.5 0.444444C0.5 0.324074 0.543294 0.219907 0.629883 0.131944C0.716471 0.0439815 0.81901 0 0.9375 0H7.0625C7.18099 0 7.28353 0.0439815 7.37012 0.131944C7.45671 0.219907 7.5 0.324074 7.5 0.444444Z",fill:"#8E8EA9"})],-1),Oe={class:"flex items-center gap-4"},Te={class:"text-[#32324D] font-['Roboto'] leading-loose flex flex-row"},Re={key:0,class:"p-4 bg-white rounded-xl border border-[#cfd4dc]"},He={class:"flex flex-wrap gap-4"},Ue={class:"space-y-4"},Ze={class:"bg-transparent border border-gray-300 p-4 flex flex-col rounded-xl"},qe=e("div",{class:"flex justify-between items-center mb-5"},null,-1),Ge={class:"overflow-auto w-full"},ze={key:0,class:"w-full border-separate border-spacing-0 text-left text-gray-500 text-sm font-['Roboto'] leading-normal"},Je=e("thead",{class:"text-[#344053]"},[e("tr",null,[e("th",{class:"py-3 px-4"},"PROFIL"),e("th",{class:"py-3 px-4"},"KELAS"),e("th",{class:"py-3 px-4"},"NAMA SEKOLAH"),e("th",{class:"py-3 px-4"},"TERAKHIR TES"),e("th",{class:"py-3 px-4"},"TOTAL TES"),e("th",{class:"py-3 px-4"},"AKSI")])],-1),Qe={class:"border-b"},Xe={class:"py-3 px-4 flex items-center gap-2"},We=e("img",{src:ve,alt:"user",class:"w-8 h-8 rounded-full mr-2"},null,-1),Ye={class:"py-3 px-4"},et={class:"py-3 px-4"},tt={class:"py-3 px-4"},at={class:"py-3 px-4"},lt={class:"py-3 px-4"},st=["onClick"],ot=e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M1.66669 8.33335L8.33335 1.66669M8.33335 1.66669H1.66669M8.33335 1.66669V8.33335",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),nt={key:1,class:"w-full flex justify-center"},it=e("span",{class:"mx-auto font-roboto text-lg text-black"}," Data Kosong... ",-1),rt=[it],ut={class:"flex items-center justify-between"},dt={class:"flex items-center gap-4"},ct=e("div",{class:"text-[#8e8ea9] text-base font-normal font-['Roboto'] leading-none"},"Entries per page",-1),vt={class:"flex items-center gap-3"},pt=["disabled"],gt=e("img",{class:"size-[12px]",src:be,alt:"icon"},null,-1),mt=e("span",{class:"font-roboto text-black"},"First",-1),bt=[gt,mt],ft=["onClick"],_t=["disabled"],ht=e("span",{class:"font-roboto text-black"},"Last",-1),xt=e("img",{class:"size-[12px]",src:fe,alt:"icon"},null,-1),wt=[ht,xt],Vt={__name:"ListSiswa",setup(f){l(JSON.parse(localStorage.getItem("userData")));const u=l(""),m=l(""),b=l(""),p=l(""),g=l(""),d=l(10),N=l([{value:"",label:"10 (Default)"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"}]),_=l(""),P=l([{value:"",label:"Kelas"}]),h=l(""),U=l([{value:"",label:"Tipe Kecerdasan"},{value:"Neokorteks Kiri Introvert",label:"Neokorteks Kiri Introvert"},{value:"Limbik Kanan Ekstrovert",label:"Limbik Kanan Ekstrovert"},{value:"Limbik Kiri Introvert",label:"Limbik Kiri Introvert"},{value:"Limbik Kiri Ekstrovert",label:"Limbik Kiri Ekstrovert"},{value:"Limbik Kanan Introvert",label:"Limbik Kanan Introvert"},{value:"Neokorteks Kanan Ekstrovert",label:"Neokorteks Kanan Ekstrovert"},{value:"Neokorteks Kanan Introvert",label:"Neokorteks Kanan Introvert"},{value:"Neokorteks Kiri Ekstrovert",label:"Neokorteks Kiri Ekstrovert"},{value:"Otak Tengah",label:"Otak Tengah"}]),x=l(""),Z=l([{value:"",label:"Gaya Belajar"},{value:1,label:"Visual"},{value:2,label:"Auditori"},{value:3,label:"Kinestik"},{value:4,label:"Visual & Auditori"},{value:5,label:"Visual & Kinestetik"},{value:6,label:"Auditori &  Kinestetik"}]),w=l(""),q=l([{value:"",label:"Grade IQ"},{value:1,label:"> 119"},{value:2,label:"111 - 119"},{value:3,label:"91 - 110"},{value:4,label:"80 - 90"},{value:5,label:"< 80"}]),C=l(""),G=l([{label:"Sort By",value:""},{label:"Latest",value:"latest"},{label:"Oldest",value:"oldest"}]),L=l(""),K=l(!1),z=l({type:"Kelas"}),V=n=>{switch(n){case"kelas":_.value="";break;case"tipeKecerdasan":h.value="";break;case"skorIq":w.value="";break;case"gayaBelajar":x.value="";break;case"perPage":d.value="";break}z.value.show=!1},S=l([]),A=l(""),k=async(n=null)=>{try{const a=R.get("token");let s=`institution_id=${localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")).staff.institution_id:null}`;if(_.value&&(s+=`&grade=${_.value}`),h.value&&(s+=`&gim=${h.value}`),w.value&&(s+=`&iq_id=${w.value}`),x.value&&(s+=`&assessment_id=${x.value}`),C.value&&(s+=`&sort_by=${C.value}`),L.value&&(s+=`&search=${L.value}`),d.value&&(s+=`&perpage=${d.value}`),u.value&&(s+=`&page=${u.value}`),n!==null){const i=n.split("api/")[1],c=await O("get",i,null,a);S.value=c.data.data,A.value=c.data.total,u.value=c.data.current_page,m.value=c.data.last_page,b.value=c.data.last_page,p.value=c.data.first_page_url,g.value=c.data.last_page_url}else{const i=await O("get",`customers?${s}`,null,a);S.value=i.data.data,A.value=i.data.total,u.value=i.data.current_page,m.value=i.data.last_page,b.value=i.data.last_page,p.value=i.data.first_page_url,g.value=i.data.last_page_url}}catch{T.fire({icon:"error",title:"Error",text:"Terjadi error saat mengambil data List Siswa.",showConfirmButton:!1,timer:2e3})}},J=ge.debounce(()=>{k()},500),Q=async()=>{try{const n=R.get("token"),a=localStorage.getItem("userData")?JSON.parse(localStorage.getItem("userData")).staff.institution_id:null,s=(await O("get",`grades?institution_id=${a}`,null,n)).data.map(i=>({value:i.grade,label:i.grade}));P.value=[...P.value,...s]}catch{T.fire({icon:"error",title:"Error",text:"Terjadi error saat mengambil data kelas.",showConfirmButton:!1,timer:2e3})}};oe(async()=>{await Promise.all([k(),Q()])}),B([_,h,w,x,C,d],()=>{k()}),B(L,()=>{J()}),B([u,b],()=>{k()});const X=ne(()=>{const a=u.value?Number(u.value):1,t=m.value?Number(m.value):0,s=Math.max(1,Math.min(a-Math.floor(5/2),t-5+1)),i=Math.min(s+5-1,t);let c=[];for(let F=s;F<=i;F++)c.push(F);return c}),W=n=>{u.value=n},Y=()=>{g.value!==null&&k(g.value)},ee=()=>{p.value!==null&&k(p.value)},te=ie(),ae=n=>{try{const a=btoa(n);te.push({name:"staff.views.detail_siswa",query:{student_id:a}})}catch{T.fire({icon:"error",title:"Error",text:"Terjadi error saat navigasi ke detail siswa.",showConfirmButton:!1,timer:2e3})}};return(n,a)=>(o(),r(I,null,[n.loading?(o(),r("div",ye,Le)):j("",!0),n.loading?j("",!0):(o(),re(pe,{key:1},{default:ue(()=>[e("section",Ke,[e("div",Ve,[e("div",$e,[e("div",Ie,[Se,e("span",Ee,v(A.value)+" entries found",1)]),Be])]),e("div",Me,[e("div",je,[e("div",De,[e("button",{onClick:a[0]||(a[0]=t=>K.value=!K.value),class:E([{"bg-[#f6f6f9]":K.value,"bg-white":!K.value},"transition-all py-2 px-3 rounded-lg border border-gray-300 shadow-sm flex gap-2"])},[Ne,D(" Filter ")],2),e("div",Pe,[H(e("select",{name:"sortBy","onUpdate:modelValue":a[1]||(a[1]=t=>C.value=t),class:"p-1 px-3 pr-10 rounded-lg bg-white border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none"},[(o(!0),r(I,null,M(G.value,t=>(o(),r("option",{key:t,value:t.value,class:"font-roboto"},v(t.label),9,Ae))),128))],512),[[de,C.value]]),Fe])]),e("div",Oe,[e("div",Te,[H(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>L.value=t),type:"text",placeholder:"Cari data siswa",class:"p-1 px-3 rounded-lg bg-transparent border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ce,L.value]])])])]),K.value?(o(),r("div",Re,[e("div",He,[y($,{label:"Kelas",modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=t=>_.value=t),FilterType:"kelas",options:P.value,onReset:a[4]||(a[4]=t=>V("kelas"))},null,8,["modelValue","options"]),y($,{label:"Kecerdasan Dominan",modelValue:h.value,"onUpdate:modelValue":a[5]||(a[5]=t=>h.value=t),options:U.value,onReset:a[6]||(a[6]=t=>V("tipeKecerdasan"))},null,8,["modelValue","options"]),y($,{label:"Gaya Belajar",modelValue:x.value,"onUpdate:modelValue":a[7]||(a[7]=t=>x.value=t),options:Z.value,onReset:a[8]||(a[8]=t=>V("gayaBelajar"))},null,8,["modelValue","options"]),y($,{label:"Grade IQ",modelValue:w.value,"onUpdate:modelValue":a[9]||(a[9]=t=>w.value=t),options:q.value,onReset:a[10]||(a[10]=t=>V("skorIq"))},null,8,["modelValue","options"])])])):j("",!0)]),e("div",Ue,[e("div",Ze,[qe,e("div",Ge,[S.value.length>0?(o(),r("table",ze,[Je,(o(!0),r(I,null,M(S.value,(t,s)=>(o(),r("tbody",{key:s},[e("tr",Qe,[e("td",Xe,[We,D(" "+v(t.name),1)]),e("td",Ye,v(t.grade)+" "+v(t.majoring),1),e("td",et,v(t.institutions.name),1),e("td",tt,v(t.updated_at),1),e("td",at,v(t.total_test),1),e("td",lt,[e("button",{onClick:i=>ae(t.id),class:"bg-[#3030F8] text-white px-4 py-2 rounded flex items-center gap-2"},[D(" Lihat Detail "),ot],8,st)])])]))),128))])):(o(),r("div",nt,rt))])]),e("div",ut,[e("div",dt,[y($,{label:"10",modelValue:d.value,"onUpdate:modelValue":a[11]||(a[11]=t=>d.value=t),options:N.value,onReset:a[12]||(a[12]=t=>V("perPage"))},null,8,["modelValue","options"]),ct]),e("div",vt,[e("button",{class:E([{"opacity-40 cursor-not-allowed":u.value==1},"flex items-center gap-[6px]"]),onClick:ee,disabled:u.value===1},bt,10,pt),(o(!0),r(I,null,M(X.value,t=>(o(),r("button",{key:t,onClick:s=>W(t),class:E(["font-roboto py-1 px-3 hover:text-[#271FE0]",{"rounded-md shadow-md border bg-white text-[#271FE0]":t===u.value}])},v(t),11,ft))),128)),e("button",{class:E([{"opacity-40 cursor-not-allowed":u.value==m.value},"flex items-center gap-[6px]"]),onClick:Y,disabled:u.value===b.value},wt,10,_t)])])])])]),_:1}))],64))}};export{Vt as default};
