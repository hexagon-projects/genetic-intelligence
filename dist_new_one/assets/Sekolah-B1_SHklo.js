import{_ as et}from"./Layout-BXduHGGo.js";import{_ as O,g as q,f as l,j as at,o as d,c,a as t,G as p,F as I,l as S,v as D,k as B,t as H,s as E,S as A,V as ot,W as nt,i as lt,r as _,b,w as V,d as M,L as W,T as st,H as it,O as rt,x as dt,y as ct}from"./index-Dthq0P5E.js";import{p as N}from"./purify.es-DX2bXU93.js";import{H as ut}from"./PhCaretLeft.vue-D9T1Eo6Q.js";import{G as gt}from"./PhCaretRight.vue-DARAl1TX.js";import{G as mt}from"./PhPencilSimple.vue-DdY5R25g.js";import{I as bt}from"./PhPlus.vue-DtaRBO1n.js";import{G as ft}from"./PhTrash.vue-B6MooMgi.js";import{_ as pt}from"./debounce-BfGIqxBF.js";import"./newNavbar-CpKe0X2L.js";import"./customerBottom-BcFpgPsH.js";import"./PhUser.vue-C0cTronS.js";import"./footer-BpngaeQ9.js";import"./_baseGetTag-mTY04yK9.js";const ht={name:"FormRegistrasiKonsultan",props:["method","detailData"],setup(s,{emit:a}){const u=()=>{a("initRegistrasi")},e=q(),g=l(!1),h=l(s.method=="update"?s.detailData.name:""),o=l(s.method=="update"?s.detailData.type:""),x=l(s.method=="update"?s.detailData.region:""),F=async()=>{const v=H.get("token"),f=new FormData;if(f.append("name",N.sanitize(h.value)),f.append("type",N.sanitize(o.value)),f.append("region",N.sanitize(x.value)),g.value=!g.value,v)try{const y=s.method=="update"?"put":"post",k=s.method=="update"?`institutions/${s.detailData.id}`:"institutions",n=await E(y,k,f,v);A.fire({icon:"success",title:s.method=="update"?"Data Diubah":"Registrasi Berhasil",text:n.data.message,showConfirmButton:!1,timer:2e3}),u(),e.go()}catch{A.fire({icon:"error",title:s.method=="update"?"Update Data Sekolah Gagal":"Tambah Data Sekolah Gagal",text:"Terjadi Kesalahan",showConfirmButton:!1,timer:2e3})}else e.push("/login"),localStorage.clear();g.value=!g.value},C=at(()=>!h.value||!o.value||!x.value);return{loadingAdd:g,name:h,type:o,region:x,buttonDisabled:C,closeModal:u,register:F}}},xt={class:"fixed z-[999] inset-0 bg-gray-900 bg-opacity-60 overflow-y-auto h-full w-full px-4 modal"},yt={class:"hidden lg:block relative w-1/2 top-10 mx-auto shadow-xl rounded-md bg-white"},_t={class:"font-myFont text-dark text-lg mx-4 pt-4"},vt=t("hr",{class:"mt-4"},null,-1),kt={key:0,class:"h-full flex flex-col items-center justify-center w-full"},wt=t("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1),Pt=[wt],St={key:1,class:"w-full flex flex-col gap-4"},Dt={class:"w-full px-3 mb-6 md:mb-0"},Tt=t("label",{for:"nama_sekolah",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Nama Sekolah / Perguruan Tinggi ",-1),Ft={class:"w-full px-3 mb-6 md:mb-0"},Ct=t("label",{for:"type",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Type ",-1),Mt={class:"w-full px-3 mb-6 md:mb-0"},Bt=t("label",{for:"region",class:"block tracking-wide font-myFont text-dark font-sm mb-2"}," Region ",-1),At=t("hr",{class:"pt-4"},null,-1),Rt={class:"px-4 py-4 flex justify-between items-center space-x-4"},jt=["disabled"],Kt={class:"block lg:hidden relative w-full top-1 mx-auto shadow-xl rounded-md bg-white"},Ut=t("h1",{class:"font-myFont text-dark text-lg mx-4 pt-4"},"Tambah Sekolah / Perguruan Tinggi",-1),Vt=t("hr",{class:"mt-4"},null,-1),Gt={class:"w-full p-4"},Lt={key:0,class:"h-full flex flex-col items-center justify-center w-full"},zt=t("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1),It=[zt],Nt={key:1,class:"w-full flex flex-col"},Ht={class:"w-full px-3 mb-6 md:mb-0"},Et=t("label",{for:"nama_sekolah",class:"block tracking-wide font-myFont text-sm lg:text-base text-dark font-sm mb-2"}," Nama Sekolah / Perguruan Tinggi ",-1),Xt={class:"w-full px-3 mb-6 md:mb-0"},Ot=t("label",{for:"type",class:"block tracking-wide font-myFont text-sm lg:text-base text-dark font-sm mb-2"}," Type ",-1),qt={class:"w-full px-3 md:mb-0"},Wt=t("label",{for:"region",class:"block tracking-wide font-myFont text-sm lg:text-base text-dark font-sm mb-2"}," Region ",-1),Yt=t("hr",{class:"pt-4"},null,-1),Jt={class:"px-4 py-4 flex justify-between items-center space-x-4"},Qt=["disabled"];function Zt(s,a,u,e,g,h){return d(),c("div",xt,[t("div",yt,[t("h1",_t,p(u.method=="update"?"Ubah Data Sekolah / Perguruan Tinggi":"Tambah Data Sekolah / Perguruan Tinggi"),1),vt,t("div",{class:I([{"h-[240px]":e.loadingAdd},"w-full p-3"])},[e.loadingAdd?(d(),c("div",kt,Pt)):e.loadingAdd?B("",!0):(d(),c("div",St,[t("div",Dt,[Tt,S(t("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>e.name=o),id:"nama_sekolah",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Nama Sekolah / Perguruan Tinggi"},null,512),[[D,e.name]])]),t("div",Ft,[Ct,S(t("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>e.type=o),id:"type",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"SD/SMP/SMA/SMK/Perguruan Tinggi"},null,512),[[D,e.type]])]),t("div",Mt,[Bt,S(t("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>e.region=o),id:"region",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Kota Bandung"},null,512),[[D,e.region]])])]))],2),At,t("div",Rt,[t("button",{onClick:a[3]||(a[3]=(...o)=>e.closeModal&&e.closeModal(...o)),class:"bg-gray-300 font-myFont text-black p-2 rounded-md hover:shadow-lg hover:opacity-80 transition duration-300 ease-in-out"},"Tutup"),t("button",{onClick:a[4]||(a[4]=(...o)=>e.register&&e.register(...o)),disabled:e.buttonDisabled,class:I([{"bg-gray-600 opacity-80 cursor-not-allowed":e.buttonDisabled},"rounded-lg px-4 py-2 bg-biru text-light font-myFont hover:bg-opacity-75 hover:shadow-md"])}," Submit ",10,jt)])]),t("div",Kt,[Ut,Vt,t("div",Gt,[e.loadingAdd?(d(),c("div",Lt,It)):e.loadingAdd?B("",!0):(d(),c("div",Nt,[t("div",Ht,[Et,S(t("input",{"onUpdate:modelValue":a[5]||(a[5]=o=>e.name=o),id:"nama_sekolah",class:"appearance-none block w-full bg-gray-200 text-sm lg:text-base text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Nama Sekolah / Perguruan Tinggi"},null,512),[[D,e.name]])]),t("div",Xt,[Ot,S(t("input",{"onUpdate:modelValue":a[6]||(a[6]=o=>e.type=o),id:"type",class:"appearance-none block w-full bg-gray-200 text-sm lg:text-base text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"SD/SMP/SMA/SMK/Perguruan Tinggi"},null,512),[[D,e.type]])]),t("div",qt,[Wt,S(t("input",{"onUpdate:modelValue":a[7]||(a[7]=o=>e.region=o),id:"region",class:"appearance-none block w-full bg-gray-200 text-sm lg:text-base text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-biru",type:"text",placeholder:"Kota Bandung"},null,512),[[D,e.region]])])]))]),Yt,t("div",Jt,[t("button",{onClick:a[8]||(a[8]=(...o)=>e.closeModal&&e.closeModal(...o)),class:"bg-gray-300 font-myFont text-black p-2 rounded-md hover:shadow-lg hover:opacity-80 transition duration-300 ease-in-out"},"Tutup"),t("button",{onClick:a[9]||(a[9]=(...o)=>e.register&&e.register(...o)),disabled:e.buttonDisabled,class:I([{"bg-gray-600 opacity-80 cursor-not-allowed":e.buttonDisabled},"rounded-lg px-4 py-2 bg-biru text-light font-myFont hover:bg-opacity-75 hover:shadow-md"])}," Submit ",10,Qt)])])])}const $t=O(ht,[["render",Zt]]),te={name:"AdminReservasi",components:{PhCaretLeft:ut,PhCaretRight:gt,PhPencilSimple:mt,PhTrash:ft,PhPlus:bt,PhX:ot,ModalTambahSekolah:$t},setup(){const s=q(),a="https://api.jatidiri.app/api/",u=l(!1),e=l([]),g=l(""),h=l(null),o=l(null),x=l(null),F=l(null),C=l(null),v=l(null),f=l(null),y=l(null),k=l(!1),n=l(""),R=l(""),j=l("Tingkat Pendidikan"),U=l(!1),G=l(!1),Y=async i=>{const m=H.get("token");if(m)try{const r=await E("delete",`institutions/${i}`,null,m);A.fire({icon:"success",title:"Data Berhasil Dihapus",text:r.data.message,showConfirmButton:!1,timer:2e3}),P()}catch{A.fire({icon:"error",title:"Gagal Hapus Data",text:"Terjadi Kesalahan Saat Hapus Data",showConfirmButton:!1,timer:2e3})}else s.push("/login"),localStorage.clear()},J=(i,m)=>{if(m=="update"){const r=e.value.find(K=>K.id===i);R.value=r,n.value=m,z()}else m=="registrasi"?(n.value=m,z()):A.fire({icon:"warning",title:"Hapus Data Ini?",text:"Data yang dihapus tidak bisa di kembalikan.",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#0b40f4",confirmButtonText:"Ya, Hapus",cancelButtonColor:"#3b3f5c",cancelButtonText:"Batal"}).then(r=>{r.isConfirmed&&Y(i)})},Q=()=>{U.value=!U.value},L=l(null),X=i=>{L.value&&!L.value.contains(i.target)&&(U.value=!1)};nt(()=>{document.body.removeEventListener("click",X)});const z=()=>{k.value=!k.value};lt(async()=>{P(),document.body.addEventListener("click",X)});const w={search:"",page:"",type:"All"},P=async()=>{u.value=!u.value;let i="?";for(const[r,K]of Object.entries(w))i=K!=""&&K!="All"?i+="&"+r+"="+K:i;const m=H.get("token");if(m)try{const r=await E("get","institutions"+i.replace("?&","?"),null,m);e.value=r.data.data,g.value=r.data.last_page,h.value=r.data.per_page,o.value=r.data.current_page,x.value=r.data.next_page_url,F.value=r.data.prev_page_url,C.value=r.data.from,v.value=r.data.to,f.value=r.data.total,u.value=!u.value}catch{A.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data",showConfirmButton:!1,timer:2e3})}else s.push("/login"),localStorage.clear()},Z=i=>{j.value=i,G.value=!0,w.type=i,P()},$=()=>{j.value="Tingkat Pendidikan",w.type="All",G.value=!1,P()},tt=pt(()=>{w.search=y.value!==""?y.value:"",w.page="",P()},500);return{detailData:R,methodType:n,baseUrl:a,loading:u,labelFilter:j,filterTingkat:Z,showFilter:U,isFilter:G,dropdownRef:L,dataSekolah:e,totalHalaman:g,itemsPerPage:h,currPage:o,nextPage:x,prevPage:F,totalDari:C,totalKe:v,totalData:f,cari:y,debouncedGetSearchData:tt,isModalTambahSekolah:k,nextPages:async i=>{w.page=i.split("?page=")[1]=="1"?"":i.split("?page=")[1],P()},prevPages:async i=>{w.page=i.split("?page=")[1]=="1"?"":i.split("?page=")[1],P()},toggleRegistrasi:z,toggleFilter:Q,resetFilter:$,btnAction:J}}},T=s=>(dt("data-v-94adf491"),s=s(),ct(),s),ee={class:"bg-gray-100 pb-28"},ae={class:"mx-4 pt-4"},oe={class:"mx-4 flex justify-start items-center text-gray-500 font-semibold"},ne=T(()=>t("span",{class:"mx-2 text-base text-gray-400"},"/",-1)),le=T(()=>t("span",{class:"text-gray-400 text-base"}," Users ",-1)),se=T(()=>t("span",{class:"mx-2 text-base"},"/",-1)),ie={class:"flex flex-col lg:flex-row justify-center mx-4 mb-4 pt-4 pb-10 gap-4"},re={class:"w-full px-7 mx-auto"},de={class:"flex flex-col bg-white w-full p-6 rounded-lg shadow-lg"},ce=T(()=>t("h1",{class:"font-myFont text-dark text-lg mb-4"},"List Reservasi",-1)),ue={class:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between lg:flex-row lg:items-center lg:justify-between"},ge={class:"relative flex flex-col gap-2 text-left"},me={class:"flex items-center gap-1"},be={class:"relative inline-block text-left"},fe={class:"flex items-center gap-1"},pe=T(()=>t("svg",{class:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})],-1)),he={key:0,class:"absolute left-22 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},xe={class:"py-1",role:"none"},ye={key:0,class:"flex justify-center w-full"},_e=T(()=>t("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1)),ve=[_e],ke={key:1,class:"overflow-x-auto"},we={class:"w-full text-sm text-left text-gray-500"},Pe=T(()=>t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"py-3 px-6"},"No"),t("th",{scope:"col",class:"py-3 px-6"},"Nama"),t("th",{scope:"col",class:"py-3 px-6"},"Detail")])],-1)),Se={class:"py-4 px-6"},De={class:"py-4 px-6"},Te={class:"flex items-center gap-2 py-4 px-6"},Fe=["onClick"],Ce=["onClick"],Me={key:2,class:"font-myFont text-center text-dark text-lg"},Be={class:"flex justify-between items-center mt-4"},Ae={class:"font-myFont text-xs md:text-sm lg:text-sm text-start lg:text-center text-dark"},Re={class:"flex items-center font-myFont text-dark text-xs lg:text-base"},je={class:"mx-2 flex items-center gap-1"},Ke={class:"px-2 py-1 border rounded-lg"};function Ue(s,a,u,e,g,h){const o=_("RouterLink"),x=_("ModalTambahSekolah"),F=_("PhPlus"),C=_("PhX"),v=_("PhPencilSimple"),f=_("PhTrash"),y=_("PhCaretLeft"),k=_("PhCaretRight");return d(),c("section",ee,[t("div",ae,[t("ol",oe,[b(o,{to:{name:"views.dashboard"},class:"text-gray-400 hover:text-dark text-base"},{default:V(()=>[M(" Beranda ")]),_:1},8,["to"]),ne,le,se,b(o,{to:{name:"admin.views.sekolah"},class:"text-base text-dark hover:text-dark/70"},{default:V(()=>[M(" Data Sekolah ")]),_:1},8,["to"])])]),b(st,{name:"fade",mode:"out-in"},{default:V(()=>[e.isModalTambahSekolah==!0?(d(),W(x,{key:0,detailData:e.detailData,method:e.methodType,onInitRegistrasi:e.toggleRegistrasi},null,8,["detailData","method","onInitRegistrasi"])):B("",!0)]),_:1}),t("div",ie,[t("div",re,[t("div",de,[ce,t("div",ue,[t("div",ge,[t("div",me,[t("button",{onClick:a[0]||(a[0]=n=>e.btnAction(null,"registrasi")),type:"button",class:"mb-2 md:mb-0 lg:mb-0 font-myFont flex w-full justify-center items-center gap-x-1.5 rounded-md bg-biru px-3 py-2 text-sm font-medium text-light hover:bg-opacity-75 hover:shadow-md"},[b(F,{size:20}),M(" Tambah Sekolah / Perguruan Tinggi ")])]),t("div",be,[t("div",fe,[t("button",{onClick:a[1]||(a[1]=(...n)=>e.toggleFilter&&e.toggleFilter(...n)),ref:"dropdownRef",type:"button",class:"mb-2 md:mb-0 lg:mb-0 font-myFont inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-medium text-dark shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",id:"menu-button","aria-expanded":"true","aria-haspopup":"true"},[M(p(e.labelFilter)+" ",1),pe],512),e.isFilter?(d(),c("button",{key:0,onClick:a[2]||(a[2]=(...n)=>e.resetFilter&&e.resetFilter(...n)),class:"text-light p-[2px] bg-danger rounded-md"},[b(C)])):B("",!0)]),e.showFilter?(d(),c("div",he,[t("div",xe,[t("a",{onClick:a[3]||(a[3]=n=>e.filterTingkat("SD")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SD "),t("a",{onClick:a[4]||(a[4]=n=>e.filterTingkat("SMP")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SMP "),t("a",{onClick:a[5]||(a[5]=n=>e.filterTingkat("SMA")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SMA "),t("a",{onClick:a[6]||(a[6]=n=>e.filterTingkat("SMK")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," SMK "),t("a",{onClick:a[7]||(a[7]=n=>e.filterTingkat("Perguruan Tinggi")),class:"cursor-pointer font-myFont hover:bg-neutral-200 text-gray-700 block px-4 py-2 text-sm",role:"menuitem",tabindex:"-1"}," Perguruan Tinggi ")])])):B("",!0)])]),S(t("input",{"onUpdate:modelValue":a[8]||(a[8]=n=>e.cari=n),onInput:a[9]||(a[9]=()=>e.debouncedGetSearchData()),type:"text",name:"cari",class:"mb-1 md:-mb-10 lg:-mb-10 font-myFont rounded-md border border-gray-300 py-2 px-3",placeholder:"Cari Data"},null,544),[[D,e.cari]])]),e.loading?(d(),c("div",ye,ve)):e.dataSekolah.length>0&&!e.loading?(d(),c("div",ke,[t("table",we,[Pe,t("tbody",null,[(d(!0),c(it,null,rt(e.dataSekolah,(n,R)=>(d(),c("tr",{key:R,class:"bg-white border-b"},[t("td",Se,p((e.currPage-1)*e.itemsPerPage+R+1),1),t("td",De,p(n.name),1),t("td",Te,[t("button",{onClick:j=>e.btnAction(n.id,"update"),class:"flex items-center gap-1 px-4 py-2 bg-biru font-myFont text-sm text-white rounded-lg hover:bg-opacity-75 hover:shadow-lg"},[b(v,{size:22})],8,Fe),t("button",{onClick:j=>e.btnAction(n.id,"delete"),class:"flex items-center gap-1 px-4 py-2 bg-danger font-myFont text-sm text-white rounded-lg hover:bg-opacity-75 hover:shadow-lg"},[b(f,{size:22})],8,Ce)])]))),128))])])])):e.dataSekolah.length==0&&!e.loading?(d(),c("span",Me,"Data kosong")):B("",!0),t("div",Be,[t("span",Ae,p(e.totalDari==null?0:e.totalDari)+" sampai "+p(e.totalKe==null?0:e.totalKe)+" dari "+p(e.totalData)+" data. ",1),t("a",Re,[M(" Halaman "),t("div",je,[t("a",{onClick:a[10]||(a[10]=n=>e.prevPages(e.prevPage)),class:"cursor-pointer text-sm md:text-base lg:text-xl text-dark text-opacity-70 hover:text-opacity-100 hover:shadow-sm"},[b(y)]),t("span",Ke,p(e.currPage),1),t("a",{onClick:a[11]||(a[11]=n=>e.nextPages(e.nextPage)),class:"cursor-pointer text-sm md:text-base lg:text-xl text-dark text-opacity-70 hover:text-opacity-100 hover:shadow-sm"},[b(k)])]),M(" Dari "+p(e.totalHalaman),1)])])])])])])}const Ve=O(te,[["render",Ue],["__scopeId","data-v-94adf491"]]),ta={__name:"Sekolah",setup(s){return(a,u)=>(d(),W(et,null,{default:V(()=>[b(Ve)]),_:1}))}};export{ta as default};
