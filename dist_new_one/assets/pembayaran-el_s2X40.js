import{h as T,g as V,f as l,i as N,o as f,c as b,a as e,b as F,p as B,G as U,_ as D,u as G,s as k,S as P,r as I,L as J,k as j,l as m,v as c,H,O,t as R}from"./index-Dthq0P5E.js";import{G as S}from"./PhWarning.vue-C0pCjHXV.js";import{p as A}from"./purify.es-DX2bXU93.js";const E={class:"fixed z-[999] inset-0 bg-gray-900 bg-opacity-60 overflow-y-auto h-full w-full px-4 modal"},L={class:"hidden lg:block relative w-3/4 top-10 mx-auto shadow-xl rounded-md bg-white"},Q={class:"w-full my-4 p-4 flex flex-col"},W={class:"my-4 mx-auto bg-red-500 px-6 py-6 rounded-full"},X={class:"text-center"},Y=e("h3",{class:"uppercase md:text-2xl text-base text-gray-900 font-semibold text-center"},"Perhatian",-1),Z={class:"text-gray-600 my-2"},$={class:"block lg:hidden relative w-full top-10 mx-auto shadow-xl rounded-md bg-white"},ee={class:"w-full p-4 flex flex-col"},te={class:"my-4 mx-auto bg-red-500 px-6 py-6 rounded-full"},ae={class:"text-center"},oe=e("h3",{class:"uppercase text-lg text-gray-900 font-semibold text-center"},"Perhatian",-1),se={class:"text-gray-600 my-2 text-sm"},ne={__name:"modalInfo",emits:["understand"],setup(_,{emit:s}){const i=T(),a=V(),n=l(i.params.tipePembayaran=="test-iq"?"IQ":i.params.tipePembayaran=="test-gim"?"Genetic Intelligence Mapping":i.params.tipePembayaran=="starter-pack"?"Starter Pack":i.params.tipePembayaran=="test-rmib"?"RMIB":i.params.tipePembayaran=="test-iaa"?"Kecanduan Gadget":"Assessment"),t=s,u=()=>{t("understand")},d=()=>{a.push("/")};return N(()=>{}),(o,p)=>(f(),b("div",E,[e("div",L,[e("div",Q,[e("a",W,[F(B(S),{size:"38",fill:"white"})]),e("div",X,[Y,e("p",Z," Untuk melakukan Test "+U(n.value)+", Harap melakukan pembayaran terlebih dahulu. ",1),e("div",{class:"gap-2 flex justify-center items-center pb-4 pt-6 text-center"},[e("button",{onClick:d,class:"rounded-lg font-myFont px-12 bg-gray-300 hover:bg-opacity-75 hover:shadow-lg text-black font-medium py-3"}," Kembali "),e("button",{onClick:u,class:"rounded-lg font-myFont px-12 bg-biru hover:bg-opacity-75 hover:shadow-lg text-white font-medium py-3"}," Mengerti ")])])])]),e("div",$,[e("div",ee,[e("a",te,[F(B(S),{size:"38",fill:"white"})]),e("div",ae,[oe,e("p",se," Untuk melakukan Test "+U(n.value)+", Harap melakukan pembayaran terlebih dahulu. ",1),e("div",{class:"w-3/4 mx-auto flex flex-col gap-2 pb-4 pt-6 text-center"},[e("button",{onClick:u,class:"rounded-lg font-myFont px-4 bg-biru hover:bg-opacity-75 hover:shadow-lg text-sm text-white font-medium py-2"}," Mengerti "),e("button",{onClick:d,class:"rounded-lg font-myFont px-4 bg-gray-300 hover:bg-opacity-75 hover:shadow-lg text-sm text-black font-medium py-2"}," Kembali ke Beranda ")])])])])]))}},re={name:"HalamanPembayaran",components:{modalInfo:ne},setup(){const _=l(!0),s=G(),i=T(),a=V(),n=l(!1),t=l(""),u=l(""),d=l(""),o=l(""),p=l(""),w=l("");console.log(p);const C=l([]),q=async()=>{if(!p.value)try{const r=t.value=="test-iq"?"test/payment?type=iq":t.value=="test-gim"?"test/payment?type=gim":t.value=="starter-pack"?"test/payment?type=starter-pack":t.value=="test-iaa"?"test/payment?type=iaa":t.value=="test-tik"?"test/payment?type=tik":t.value=="test-jatidiri"?"test/payment?type=jatidiri":t.value=="test-anxiety"?"test/payment?type=anxiety":t.value=="test-stres"?"test/payment?type=stres":t.value=="test-mental"?"test/payment?type=mental":t.value=="test-rmib"?"test/payment?type=rmib":"test/payment?type=assessment",v=await k("get",r,null,null);p.value=v.data.price}catch{P.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data harga pembayaran.",showConfirmButton:!1,timer:2500})}},K=(r,v,M)=>{d.value=v,o.value=r,w.value=M,q()},z=async()=>{const r=R.get("token"),v={voucher_code:A.sanitize(u.value),customer_id:JSON.parse(localStorage.getItem("userData")).id,payment_method_code:o.value,fee:w.value},M=t.value=="test-iq"?"v2/payment/test/iq":t.value=="test-gim"?"v2/payment/test/gim":t.value=="starter-pack"?"v2/payment/test/starter-pack":t.value=="test-iaa"?"v2/payment/test/iaa":t.value=="test-tik"?"v2/payment/test/tik":t.value=="test-jatidiri"?"v2/payment/test/jatidiri":t.value=="test-anxiety"?"v2/payment/test/anxiety":t.value=="test-stres"?"v2/payment/test/stres":t.value=="test-mental"?"v2/payment/test/mental":t.value=="test-rmib"?"v2/payment/test/rmib":"v2/payment/test/assessment";try{n.value=!0;const h=await k("post",M,JSON.stringify(v),r);if(h.data.data&&h.data.data.paymentUrl){const y=h.data.data.paymentUrl;let g="",x="";localStorage.setItem("merchantId",JSON.stringify(h.data.payment_data.merchant_order_id)),y.includes("ref=")?(g="https://passport.duitku.com/topup/topupdirectv2.aspx?ref=",x=y.split("ref=")[1]):y.includes("reference=")&&(g="https://passport.duitku.com/topup/v2/TopUpCreditCardPayment.aspx?reference=",x=y.split("reference=")[1]),window.location.href=g+x}else{const y=new FormData;y.append("refresh_user","true");const g=await k("post","login",y,r);s.commit("user",g.data.customer),localStorage.setItem("userData",JSON.stringify(g.data.customer)),P.fire({icon:"success",title:"Berhasil",text:"Selamat! Pembayaran Berhasil.",showConfirmButton:!0,confirmButtonColor:"#0b40f4",confirmButtonText:"Lanjutkan"}).then(x=>{x.isConfirmed&&a.push({name:t.value=="test-iq"?"user.views.iq":t.value=="test-gim"?"user.views.deteksi":t.value=="test-assessment"?"user.views.assesment":t.value=="test-rmib"?"user.views.rmib":t.value=="test-iaa"?"user.views.test_gadget":t.value=="test-tik"?"user.views.test_kebahagiaan":t.value=="test-jatidiri"?"user.views.test_jatidiri":t.value=="test-anxiety"?"user.views.test_jatidiri_anxiety":t.value=="test-stres"?"user.views.test_jatidiri_stres":t.value=="test-mental"?"user.views.test_jatidiri_mental":t.value=="test-gadget"?"user.views.test_gadget":"views.dashboard"})})}}catch(h){P.fire({icon:"error",title:"Error",text:h.response.data.error,showConfirmButton:!1,timer:2500})}finally{n.value=!1}};return N(async()=>{n.value=!n.value;try{const r=await k("get","payment/methods",null,null);C.value=r.data.paymentFee}catch{P.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengambil data metode pembayaran.",showConfirmButton:!1,timer:2500})}t.value=i.params.tipePembayaran,n.value=!n.value}),{showModal:_,toggleModal:()=>{_.value=!_.value},loadingFetch:n,code_voucher:u,paymentType:d,paymentCode:o,totalFee:p,feePaymentMethod:w,paymentMethod:C,pilihPayment:K,submitPayment:z}}},le={class:"bg-gray-100 py-[6vh]"},ie={class:"flex flex-col items-center lg:flex-row justify-center mx-4 mb-4 pt-4 pb-10 gap-4"},de={class:"bg-white mx-4 w-full lg:w-9/12 lg:mx-auto px-10 py-4 shadow-sm rounded-lg"},me={class:"lg:hidden flex flex-col items-center gap-2"},ce={class:"w-full"},ue=e("label",{for:"code_voucher",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Kode Voucher:",-1),pe={class:"flex items-center gap-1"},ye=e("p",{class:"font-myFont text-neutral-500 text-xs"},"Jika punya, Gunakan kode voucher saat mendaftar untuk meraih keuntungan tambahan.",-1),fe=e("hr",{class:"my-4 lg:hidden"},null,-1),he={class:"lg:hidden flex flex-col justify-center items-center gap-2"},ge={class:"w-full"},be=e("label",{for:"metode_pembayaran",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Metode Pembayaran:",-1),_e={class:"w-full"},ve=e("label",{for:"total_fee",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Total Pembayaran:",-1),xe={class:"w-full mb-2"},we=e("label",{for:"payment_code",class:"block text-xs md:text-sm font-myFont font-medium text-gray-600"},"Biaya Admin:",-1),ke=e("h1",{class:"hidden lg:block font-myFont text-dark text-lg mb-10"}," Lakukan pembayaran sekarang ",-1),Pe={class:"hidden lg:flex items-center gap-4"},Fe={class:"w-1/4 mb-4"},Me=e("label",{for:"code_voucher",class:"block text-sm font-myFont font-medium text-gray-600"},"Kode Voucher:",-1),je={class:"flex items-center mt-2 gap-1"},Ce=e("p",{class:"font-myFont text-neutral-500 text-sm"},"Jika punya, Gunakan kode voucher saat mendaftar untuk meraih keuntungan tambahan.",-1),Be=e("hr",{class:"hidden lg:block mt-1 mb-4"},null,-1),Ue={class:"hidden lg:flex justify-center items-center gap-2 mt-2"},Ie={class:"w-1/3 mb-4"},Se=e("label",{for:"metode_pembayaran",class:"block text-sm font-myFont font-medium text-gray-600"},"Metode Pembayaran:",-1),Te={class:"w-1/3 mb-4"},Ve=e("label",{for:"total_fee",class:"block text-sm font-myFont font-medium text-gray-600"},"Total Pembayaran:",-1),Ne={class:"w-1/3 mb-4"},qe=e("label",{for:"payment_code",class:"block text-sm font-myFont font-medium text-gray-600"},"Biaya Admin:",-1),Ke={key:0,class:"flex justify-center h-52 pt-14 w-full"},ze=e("span",{class:"mx-auto animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-biru border-r-biru rounded-full w-14 h-14"},null,-1),De=[ze],Ge={key:1,class:"-ml-2 flex flex-col gap-2 max-h-36 lg:max-h-48 mb-2"},Je={class:"py-2 px-2 grid grid-cols-4 gap-2 overflow-y-scroll w-full"},He=["onClick"],Oe=["src","alt"],Re={class:"flex justify-end pt-2"};function Ae(_,s,i,a,n,t){const u=I("modalInfo"),d=I("PhInfo");return f(),b("section",le,[a.showModal?(f(),J(u,{key:0,onUnderstand:a.toggleModal},null,8,["onUnderstand"])):j("",!0),e("div",ie,[e("div",de,[e("div",me,[e("div",ce,[ue,m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>a.code_voucher=o),type:"text",name:"code_voucher",class:"mt-1 p-2 border placeholder:text-sm rounded-md w-full bg-white focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Kode"},null,512),[[c,a.code_voucher]])]),e("div",pe,[F(d,{size:28}),ye])]),fe,e("div",he,[e("div",ge,[be,m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>a.paymentType=o),type:"text",name:"metode_pembayaran",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Pilih Metode Pembayaran",readonly:""},null,512),[[c,a.paymentType]])]),e("div",_e,[ve,m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>a.totalFee=o),type:"text",name:"total_fee",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Rp.0",readonly:""},null,512),[[c,a.totalFee]])]),e("div",xe,[we,m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>a.feePaymentMethod=o),type:"text",name:"payment_code",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Rp.0",readonly:""},null,512),[[c,a.feePaymentMethod]])])]),ke,e("div",Pe,[e("div",Fe,[Me,m(e("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>a.code_voucher=o),type:"text",name:"code_voucher",class:"mt-1 p-2 border placeholder:text-sm rounded-md w-full bg-white focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",placeholder:"Kode"},null,512),[[c,a.code_voucher]])]),e("div",je,[F(d,{size:20}),Ce])]),Be,e("div",Ue,[e("div",Ie,[Se,m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>a.paymentType=o),type:"text",name:"metode_pembayaran",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",readonly:""},null,512),[[c,a.paymentType]])]),e("div",Te,[Ve,m(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>a.totalFee=o),type:"text",name:"total_fee",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",readonly:""},null,512),[[c,a.totalFee]])]),e("div",Ne,[qe,m(e("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>a.feePaymentMethod=o),type:"text",name:"payment_code",class:"mt-1 p-2 border rounded-md w-full read-only:bg-gray-200 focus:outline-none focus:ring-biru focus:ring-2 focus:border-biru",readonly:""},null,512),[[c,a.feePaymentMethod]])])]),a.loadingFetch?(f(),b("div",Ke,De)):j("",!0),!a.loadingFetch&&a.paymentMethod?(f(),b("div",Ge,[e("div",Je,[(f(!0),b(H,null,O(a.paymentMethod,(o,p)=>(f(),b("a",{onClick:w=>a.pilihPayment(o.paymentMethod,o.paymentName,o.totalFee),key:p,class:"cursor-pointer hover:animate-wiggle bg-white border rounded-lg shadow-sm px-2 py-2"},[e("img",{src:o.paymentImage,alt:o.paymentName},null,8,Oe)],8,He))),128))])])):j("",!0),e("div",Re,[e("button",{onClick:s[8]||(s[8]=(...o)=>a.submitPayment&&a.submitPayment(...o)),class:"bg-biru text-white font-myFont px-4 py-2 rounded-lg"}," Bayar ")])])])])}const Xe=D(re,[["render",Ae]]);export{Xe as default};
